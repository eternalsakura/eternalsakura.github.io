<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="sakuraのsakura," />





  <link rel="alternate" href="/atom.xml" title="Sakuraのblog" type="application/atom+xml" />






<meta name="description" content="2018-1-281.看玄武实验室的每日安全推送（主要是看了android挖矿，p2p蠕虫）2.配置shadow尝试用gdb和gdbserver来调试https://github.com/CENSUS/shadowhttps://developer.android.com/ndk/downloads/index.html?hl=zh-cnhttp://kiya.studio/2017/06/21/">
<meta name="keywords" content="sakuraのsakura">
<meta property="og:type" content="article">
<meta property="og:title" content="Sakuraのdiary">
<meta property="og:url" content="http://eternalsakura13.com/2099/09/18/study/index.html">
<meta property="og:site_name" content="Sakuraのblog">
<meta property="og:description" content="2018-1-281.看玄武实验室的每日安全推送（主要是看了android挖矿，p2p蠕虫）2.配置shadow尝试用gdb和gdbserver来调试https://github.com/CENSUS/shadowhttps://developer.android.com/ndk/downloads/index.html?hl=zh-cnhttp://kiya.studio/2017/06/21/">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-03-26-LKM3_2048.png">
<meta property="og:image" content="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-03-26-030340.jpg">
<meta property="og:image" content="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-05-02-074634.png">
<meta property="og:image" content="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-05-02-151804.jpg">
<meta property="og:image" content="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-06-18-180229.png">
<meta property="og:image" content="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-06-19-115842.jpg">
<meta property="og:image" content="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-06-21-173058.jpg">
<meta property="og:image" content="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-11-17-114730.jpg">
<meta property="og:image" content="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-11-17-115025.jpg">
<meta property="og:image" content="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-11-17-120007.png">
<meta property="og:updated_time" content="2019-06-28T13:11:48.407Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sakuraのdiary">
<meta name="twitter:description" content="2018-1-281.看玄武实验室的每日安全推送（主要是看了android挖矿，p2p蠕虫）2.配置shadow尝试用gdb和gdbserver来调试https://github.com/CENSUS/shadowhttps://developer.android.com/ndk/downloads/index.html?hl=zh-cnhttp://kiya.studio/2017/06/21/">
<meta name="twitter:image" content="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-03-26-LKM3_2048.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'QOPH9ID41Z',
      apiKey: '',
      indexName: 'sakura',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://eternalsakura13.com/2099/09/18/study/"/>





  <title>Sakuraのdiary | Sakuraのblog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-113420358-1', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sakuraのblog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-buglist">
          <a href="/buglist/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            BugList
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://eternalsakura13.com/2099/09/18/study/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sakura">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sakura_heart.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sakuraのblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Sakuraのdiary</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2099-09-18T22:05:42+08:00">
                2099-09-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习日记/" itemprop="url" rel="index">
                    <span itemprop="name">学习日记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2099/09/18/study/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2099/09/18/study/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="2018-1-28"><a href="#2018-1-28" class="headerlink" title="2018-1-28"></a>2018-1-28</h2><p>1.看玄武实验室的每日安全推送（主要是看了android挖矿，p2p蠕虫）<br>2.配置shadow<br>尝试用gdb和gdbserver来调试<br><a href="https://github.com/CENSUS/shadow" target="_blank" rel="noopener">https://github.com/CENSUS/shadow</a><br><a href="https://developer.android.com/ndk/downloads/index.html?hl=zh-cn" target="_blank" rel="noopener">https://developer.android.com/ndk/downloads/index.html?hl=zh-cn</a><br><a href="http://kiya.studio/2017/06/21/android-gdb/" target="_blank" rel="noopener">http://kiya.studio/2017/06/21/android-gdb/</a><br>shadow文档的几个坑点</p>
<ul>
<li>arm-linux-androideabi-gdb，也就是gdb-arm版没有提供，要自己找，我装了一个ndk r10e，然后弄了一个，嗯，r11移除了gdb。</li>
<li>在gdb remote之前，文档里没有写forward转发，导致我试的时候一直refuse</li>
</ul>
<p>3.晚上最大的收获是看到了一个不错的blog（android逆向CTF）<br><a href="http://kiya.studio/2333/03/03/android-reversing-skills/#more" target="_blank" rel="noopener">http://kiya.studio/2333/03/03/android-reversing-skills/#more</a></p>
<h2 id="2018-1-29"><a href="#2018-1-29" class="headerlink" title="2018-1-29"></a>2018-1-29</h2><ol>
<li>看玄武的<a href="https://mp.weixin.qq.com/s/mOaXkGTY2704P6TV2KBvwg" target="_blank" rel="noopener">每日安全推送</a>，主要看了WinAFL</li>
<li>nexus5被我刷成砖……然后顺手把刷机、root和装xposed全都整理了一遍。</li>
<li>webkit的poc断点找到了，可以调了</li>
<li>做了一道阿里CTF第二题，一道关于反调试的题。</li>
</ol>
<h2 id="2018-1-31"><a href="#2018-1-31" class="headerlink" title="2018-1-31"></a>2018-1-31</h2><ol>
<li>看AI直播调webkit，感觉调浏览器好难呀。</li>
<li>看玄武的<a href="https://mp.weixin.qq.com/s/M4QZxs_G-lZ810o_i2KJhA" target="_blank" rel="noopener">每日安全推送</a>，主要关注了反调试和使用Strava 热力图来推断军事基地位置，很有趣的思路。</li>
<li>研究了一下加固原理和脱壳基础：dvmDexFileOpenPartial，还挺简单的。</li>
<li>研究了ptrace和调试器原理，了解了ptrace反调试的一些技巧</li>
</ol>
<h2 id="2018-2-1"><a href="#2018-2-1" class="headerlink" title="2018-2-1"></a>2018-2-1</h2><ol>
<li>本来想今天研究一下ndk编译的，不过睡着了……然后也没看什么东西</li>
<li>帮学弟解决了一些搭建博客的bug，顺便自己把博客的主题配色，代码高亮，搜索，评论什么的都修改或添加了，好看多了……</li>
</ol>
<h2 id="2018-2-2"><a href="#2018-2-2" class="headerlink" title="2018-2-2"></a>2018-2-2</h2><ol>
<li>看玄武的<a href="https://xuanwulab.github.io/cn/secnews/2018/02/02/index.html" target="_blank" rel="noopener">每日安全推送</a></li>
<li>钓鱼网站那个很有趣，我就测试了一下，然后因为ss代理不走终端，找了<a href="https://juejin.im/entry/5821840cd203090055134cc0" target="_blank" rel="noopener">一篇文章</a>和<a href="https://blog.kelu.org/tech/2017/07/06/parallels-vm-use-proxy-with-host-on-mac.html" target="_blank" rel="noopener">另一篇文章</a>，配置了一下就好了~</li>
<li>自己实践了一下那个钓鱼工具，实践文章和终端那个都可以在”杂项”分类里找到</li>
<li>研究了一下怎么用ndk-build编译一个能在手机上运行的c程序，这样明天就可以尝试hook了</li>
</ol>
<h2 id="2018-2-3"><a href="#2018-2-3" class="headerlink" title="2018-2-3"></a>2018-2-3</h2><ol>
<li>今天没有玄武的推送看~</li>
<li>研究了android native层hook，算是学到不少东西了。</li>
</ol>
<h2 id="2018-2-4"><a href="#2018-2-4" class="headerlink" title="2018-2-4"></a>2018-2-4</h2><ol>
<li>写了第一个xposed程序~遇到了一些坑，不过还是趟过去了。</li>
<li>修改nexus5的boot.img,打开系统调试，又坑了我一会。。</li>
</ol>
<h2 id="2018-2-5"><a href="#2018-2-5" class="headerlink" title="2018-2-5"></a>2018-2-5</h2><ol>
<li>今天出去怠惰了（茶）</li>
<li>xposed继续学习了一下，学会了一些姿势，感觉还是不错的~</li>
</ol>
<h2 id="2018-2-6"><a href="#2018-2-6" class="headerlink" title="2018-2-6"></a>2018-2-6</h2><ol>
<li>研究了怎么搭建shadowsocks服务端和优化，顺便卖了几个~</li>
<li>自己写了一个基于flask的B/S端口扫描器，代码太难看就不放了（茶</li>
</ol>
<h2 id="2018-2-7"><a href="#2018-2-7" class="headerlink" title="2018-2-7"></a>2018-2-7</h2><ol>
<li>继续看玄武每日推送<a href="https://mp.weixin.qq.com/s/FM-mZh1e8YQP0MWrV1IlVw" target="_blank" rel="noopener">2.6</a>和<a href="https://mp.weixin.qq.com/s/2JMrsyyuTErVy-pXRoL3Jg" target="_blank" rel="noopener">2.7</a><br>wordpress DOS有点意思，不过没搞懂，另外主要看了android安全公告2月版，看懂了一些（限于原理），开发太菜了。</li>
<li>学习了android的jni开发，基本的都摸了一遍。</li>
</ol>
<h2 id="2018-2-8"><a href="#2018-2-8" class="headerlink" title="2018-2-8"></a>2018-2-8</h2><ol>
<li>继续昨天的jni学习，摸清了native方法的动态注册</li>
<li>研究了下.init_array,结合jni动态注册，做了一道CTF题</li>
<li>继续看玄武每日推送<a href="https://mp.weixin.qq.com/s/sqPmC-z-HiH4UKArE1Gdgw" target="_blank" rel="noopener">2.8</a>,这篇<a href="https://www.fireeye.com/blog/threat-research/2018/02/reelphish-real-time-two-factor-phishing-tool.html" target="_blank" rel="noopener">钓鱼</a>的有趣</li>
<li>给AI写了个爬页面上文件的爬虫。</li>
</ol>
<h2 id="2018-2-9"><a href="#2018-2-9" class="headerlink" title="2018-2-9"></a>2018-2-9</h2><ol>
<li>研究android构建过程，Gradle工作流程</li>
<li>读玄武每日推送（存了个移动端静态分析的github准备好好看看）</li>
</ol>
<h2 id="2018-2-10"><a href="#2018-2-10" class="headerlink" title="2018-2-10"></a>2018-2-10</h2><ol>
<li>研究Dex文件格式和修复</li>
<li>学习了用ddms来dump出运行内存做题的技巧。</li>
<li>学习了新建android工程，调so文件解题。</li>
</ol>
<h2 id="2018-2-11"><a href="#2018-2-11" class="headerlink" title="2018-2-11"></a>2018-2-11</h2><ol>
<li>把昨天看到一道递归算法的android re做了，感觉现在做一般的CTF都有点思路了，做看雪的还是GG，还要提高姿势水平。</li>
<li>今天上午看到我在知乎的提问有师傅回答我了：<a href="https://www.zhihu.com/question/266901100/answer/316607339，然后作死的又打开了这个洞CVE-2015-3864，嗯...我调没调出来，忙活了一上午，断点都没断下来，但是起码……嗯，我记住了名字！libstagefright，我是记住了……别等我学会了来找你。。" target="_blank" rel="noopener">https://www.zhihu.com/question/266901100/answer/316607339，然后作死的又打开了这个洞CVE-2015-3864，嗯...我调没调出来，忙活了一上午，断点都没断下来，但是起码……嗯，我记住了名字！libstagefright，我是记住了……别等我学会了来找你。。</a></li>
<li>今天下午做完题就又瞎看了一会，思考我是不是选错了方向……android的调试贼麻烦，资料还贼少，看了看看雪，主要是浏览器、文件格式和内核，虽然其实都一样的，那些资料也不多，没法挖洞的……认识的dalao又少，没法充分交流QAQ，唉，感觉我是不是不适合当黑客，看vulcan的师傅微博，月月一大批CVE，就我什么都挖不到，不过今晚看了看师傅们的博客，他们的心路历程给了我很大勇气，是的，我早就不打算退后了，只有前进而已。</li>
</ol>
<h2 id="2018-2-12"><a href="#2018-2-12" class="headerlink" title="2018-2-12"></a>2018-2-12</h2><ol>
<li>今天刷空间看到moctf比赛，就参加了下，把android/linux re做掉就没看了。</li>
<li>依然很迷茫，不过其实想想，我开始学二进制，其实也就不到半年，进步速度并不是不能接受，只是在技能进阶上卡住了又没人交流而已，嗯，再想想好了。</li>
</ol>
<h2 id="2018-2-13到19"><a href="#2018-2-13到19" class="headerlink" title="2018-2-13到19"></a>2018-2-13到19</h2><ol>
<li>这些天几乎都过年去了……然后唯一做了点事就是把自己的课程设计做了，<a href="https://github.com/eternalsakura/PortScan" target="_blank" rel="noopener">PortScan</a></li>
<li>新年新气象，最近家里的事情也是乱七八糟，能多学点赚钱的技术分担压力就好了。</li>
<li>下学期的计划——fuzz、CVE漏洞研究、前端后端的一些Web开发（写点相关项目练手），然后找实习。</li>
<li>学会了一项新的运动，保龄球，很有意思。</li>
<li>最近一直什么都没学，自己也在反思一些东西，寻找一个前进的点。<br>比如浏览器，文件格式，还是内核，或者其他，还是都不是。<br>安全只是个抽象的概念，具体化了才能变成业务。<br>我还需要探究一段时间，读很多的漏洞分析文章，追随前辈们走过的路途，再进一步反思。<br>“一个漏洞的产生到漏洞利用至少会经历好几个阶段：Bug –&gt; exploitable bug(vulnerability) –&gt; poc –&gt; exploit –&gt; reliable/weaponized exploit。虽然大家都喜欢把fuzzing出来的bug讲成blah-blah-blah的故事或者作为PR，但我们真正关心的漏洞应该是能到最后两个阶段的vulnerability。”</li>
</ol>
<h2 id="2018-2-20到21"><a href="#2018-2-20到21" class="headerlink" title="2018-2-20到21"></a>2018-2-20到21</h2><ol>
<li>返校真是艰难……飞机火车客车出租全都转了一遍才到……</li>
<li>晚上收拾了下房间，看了看看雪，发现师傅做的有趣CTF题，<a href="https://bbs.pediy.com/thread-224686.htm" target="_blank" rel="noopener">https://bbs.pediy.com/thread-224686.htm</a></li>
<li>群里在讨论内存管理和hook，被推荐了一本腾讯的手游安全的书《游戏安全：手游安全技术入门》，还不错，可以入个门……</li>
<li>看到一个博客提供了一些自定义ROM的资料，最近也想改，看到了就记录一下。<a href="https://my.oschina.net/ibuwai/blog?catalog=3379629&amp;temp=1519222237338" target="_blank" rel="noopener">https://my.oschina.net/ibuwai/blog?catalog=3379629&amp;temp=1519222237338</a></li>
</ol>
<h2 id="2018-2-22"><a href="#2018-2-22" class="headerlink" title="2018-2-22"></a>2018-2-22</h2><ol>
<li>看了《手游安全技术那本书》，学习了注入技术。</li>
<li>下午买了考虫的口语能力提升班，然后学习了下</li>
<li>晚上在seebug逛，找各种二进制漏洞分析的资料，然后看到了陈良的ppt,remet的github,韩子诺的文章，还有很多很多……CVE-2014-7911感觉可以调调，我得整理整理我搜的资料，然后按照原理-&gt;漏洞分析-&gt;exp去学习w</li>
</ol>
<h2 id="2018-2-23到25"><a href="#2018-2-23到25" class="headerlink" title="2018-2-23到25"></a>2018-2-23到25</h2><ol>
<li>是的，仔细算算，我已经编译AOSP编译了三天了，而且还没编译好……现在已经基本放弃在mac上编译了，我现在突然想,flanker大神之所以用ubuntu做主力机……是不是因为在mac上编译不出AOSP呀……(逃)</li>
<li>明天在旧电脑上装win/ubuntu的双系统，要不是因为这学期有win网络编程和c#开发……我就直接烧ubuntu进去了（撑脸</li>
<li>嗯，不用明天了，在今天的收尾……新学期的开始……我终于是守得云开见月明，把AOSP弄出来了！</li>
</ol>
<h2 id="2018-2-26"><a href="#2018-2-26" class="headerlink" title="2018-2-26"></a>2018-2-26</h2><ol>
<li>学习了stack pivot，<a href="http://tacxingxing.com/2017/05/10/stack-pivot/" target="_blank" rel="noopener">劫持栈指针</a></li>
<li>学习了heap spray,<a href="http://secwiki.neu.edu.cn/wiki/images/f/fe/%E5%86%85%E5%AD%98%E5%96%B7%E5%B0%84%E5%9C%A8%E5%AE%89%E5%8D%93Root%E5%88%A9%E7%94%A8%E4%B8%AD_%E9%99%88%E8%89%AF.pdf" target="_blank" rel="noopener">堆喷</a></li>
<li>学习了<a href="http://pwn4.fun/2016/11/20/C-虚函数调用攻防战/" target="_blank" rel="noopener">虚表攻防</a></li>
<li>了解android<a href="https://www.blackhat.com/docs/us-15/materials/us-15-Xu-Ah-Universal-Android-Rooting-Is-Back.pdf" target="_blank" rel="noopener">root</a></li>
<li>Time-of-check Time-of-use (TOCTOU) Race Condition</li>
<li>今天还是认真的研究了一下之前没调出来的cve-2015-3864，因为这个漏洞有完整的利用链资料，非常的棒，虽然可能调不了什么的，但是理解这个利用过程也很有意义。<br>还是要感谢一下看雪师傅的<a href="https://bbs.pediy.com/thread-222893.htm" target="_blank" rel="noopener">文章</a>，还加了好友0.0，感觉要是我一开始就是编译的AOSP去调试……可能寒假就调出来了2333，反正感觉今天还是很有收获的。</li>
</ol>
<h2 id="2018-2-27"><a href="#2018-2-27" class="headerlink" title="2018-2-27"></a>2018-2-27</h2><ol>
<li>一上午调了道64位rop，还没调出来..exm???是这题的错还是我的错…多看看别人的exp好了，以前还是做题不够，积累不够。</li>
<li>继续看stagefright好了，争取今天多少调一调。</li>
<li>好吧，没看进去，gp0的exp大致看懂了，不过metaphor的思路还是费解，可能我现在的理解力还是不够。</li>
<li>下午一直在整理之前看的ptmalloc的一些基本概念，虽然意义不是很大，但是理一理总是好的，还是要为ctf-wiki打call，里面写了非常多的干货，明天继续整理。</li>
</ol>
<h2 id="2018-2-28"><a href="#2018-2-28" class="headerlink" title="2018-2-28"></a>2018-2-28</h2><ol>
<li>体育课累死……密码学数学基础有趣。</li>
<li>今天把heap exploit的unlink整理了一下，虽然最后那个例子有点问题，我换了两个系统都没成功，但是原理还是理清了，真的是都快忘了……</li>
</ol>
<h2 id="2018-3-1"><a href="#2018-3-1" class="headerlink" title="2018-3-1"></a>2018-3-1</h2><ol>
<li>又混了篇看雪的优秀，感觉还是蛮有成就感的，自己发的文章都不是优秀就是精品。</li>
<li>今天有点怠惰呢，明天要继续努力。</li>
</ol>
<h2 id="2018-3-2"><a href="#2018-3-2" class="headerlink" title="2018-3-2"></a>2018-3-2</h2><ol>
<li>今天一天都在整理fastbin的一个内容（其实还玩了一会Web，黑掉学校OJ嘿嘿嘿）</li>
<li>这道赛题略难，然后跟团队练习赛的PragyanCTF，感觉这赛题像是file io啊。。谁出的题这么皮。。</li>
</ol>
<h2 id="2018-3-3"><a href="#2018-3-3" class="headerlink" title="2018-3-3"></a>2018-3-3</h2><ol>
<li>生日快乐~自己，去订了蛋糕，今天继续研究了一下那个fastbin的题，真的很难。。</li>
<li>把android kernel也编译了出来，这次真的是可以调了。。</li>
</ol>
<h2 id="2018-3-4"><a href="#2018-3-4" class="headerlink" title="2018-3-4"></a>2018-3-4</h2><ol>
<li>今天和实验室大一的聊了下，然后把我能知道的东西，方向什么的，都聊了一下。</li>
<li>9447 CTF 2015的fastbin是真的难……我还是不懂，算了算了，明天看点别的吧，这个todo。</li>
<li>今天和一个师傅聊了下IoT漏洞应该怎么挖，受益匪浅，但是转换为具体的硬实力还需要多看多学多调。</li>
</ol>
<h2 id="2018-3-5"><a href="#2018-3-5" class="headerlink" title="2018-3-5"></a>2018-3-5</h2><ol>
<li>今天把那道fastbin的题认真的理了理，其实也不是很难，然后又把pragyan ctf2018的两道pwn题做了一下，第一道还好，那个目录遍历没理解上，看了wp会了，第二道就有点迷，静态链接下的格式化字符串漏洞，没办法覆盖got表，看了一篇wp是覆盖malloc_hook，这不是我白天看的那道fastbin的套路么……真的是……然后打开栈执行，这……真是脑洞，又感觉自己很菜……</li>
<li>嗯w，文章又被看雪推送了，还是感觉蛮不错的……希望能认识更多人吧w，今天看了看玄武每日推送的目录，非常nice，准备找个时间把这段时间没看的都啃一下。</li>
</ol>
<h2 id="2018-3-6"><a href="#2018-3-6" class="headerlink" title="2018-3-6"></a>2018-3-6</h2><ol>
<li>上周的比赛，搞到今天总算是大致调完了，就只剩一个点不懂，也是实在搞不懂了，教主说的很有道理，只有把文章写成博客，发出去，才能检验你到底对这个东西的理解怎么样，事实上，也只有在学习中的我，才会如此详细的写wp吧。</li>
</ol>
<h2 id="2018-3-7-8"><a href="#2018-3-7-8" class="headerlink" title="2018-3-7-8"></a>2018-3-7-8</h2><ol>
<li>这两天把漏洞战争的环境大致搭了一下，从用windbg到看到符号，还是折腾了一下。</li>
</ol>
<h2 id="2018-3-9-10"><a href="#2018-3-9-10" class="headerlink" title="2018-3-9-10"></a>2018-3-9-10</h2><ol>
<li>调了一下漏洞战争堆的第一个binary，然后熟悉了一下工具使用，还是nice.</li>
<li>调了cve-2012-1876的poc，发现了一些书上没有提到的地方和一个错误，就不提勘误了…都出了这么久了…原理差不多懂了，很有趣。</li>
<li>今天有意想不到的收获，或者说机会吧，希望我能把握好，然后做好安全研究，成为一个优秀的黑客。</li>
<li>列一个CVE调试计划吧，目前进度1/10<br>浏览器<br>3.7 CVE-2012-1876,堆溢出（p2o ie9)<br>4.3 CVE-2011-0027,整数溢出漏洞 (p2o ie8)<br>4.6 CVE-2013-2551,整数溢出漏洞(p2o ie10)<br>7.4 CVE-2013-1347,UAF(ie)<br>android<br>10.7 CVE-2014-3153 anroid kernel提权</li>
</ol>
<h2 id="2018-3-11-12"><a href="#2018-3-11-12" class="headerlink" title="2018-3-11-12"></a>2018-3-11-12</h2><ol>
<li>这两天进度比较低迷，第一天直接莽上去调exp然后被打脸…今天把vupen的文章仔细读了一遍，把整个利用过程理解了一下。</li>
<li>说来有个有趣的点，p2o之后cve-2012-1876不是应该补了么，怎么在win8+ie10上还能利用，更有趣的是vupen明明用这个洞getshell了ie9，但是为什么keen在Study of Exploit Migitation in Modern Browsers这个ppt上说了bstr的分配不再能被利用，那vupen到底是怎么写的exp…</li>
<li>最近的计划（才怪…</li>
</ol>
<ul>
<li>编译的前端后端</li>
<li>kernel的漏洞</li>
<li>看diff写poc…</li>
</ul>
<h2 id="2018-3-13-14"><a href="#2018-3-13-14" class="headerlink" title="2018-3-13-14"></a>2018-3-13-14</h2><ol>
<li>密码学数学基础和算法这些课也就算了，晚上还有软件开发的课，各种文档什么的…能不能好好lu代码，把之前写的项目project答辩完了。</li>
<li>等到了想等的结果，收心认真学习了。</li>
<li>晚上把计算机系统素养里的部分内容（VM）又看了一下，十分有意义。</li>
<li>为了学编译原理，先自己lu一个c语言解释器了解个大概吧。</li>
</ol>
<h2 id="2018-3-15-17"><a href="#2018-3-15-17" class="headerlink" title="2018-3-15-17"></a>2018-3-15-17</h2><ol>
<li>这几天把write a c interpret看完了，大致了解了编译器前后端，当然肯定现在还是不会写的。</li>
<li>调cve-2012-7864,虽然称不上调通exp，但是大部分都调出来了，poc调的很顺利，在exp就处处踩坑。</li>
<li>说来好像webkit的dom的堆被分开了，以后就不会有那么多uaf了。</li>
</ol>
<h2 id="2018-3-18-20"><a href="#2018-3-18-20" class="headerlink" title="2018-3-18-20"></a>2018-3-18-20</h2><ol>
<li>日记还是要每天记……都忘了自己每天做了什么了……把c++的project做完了，做了两道pwn题。</li>
<li>看了一下LCTF2017的题目,large bin的unlink确实没练过，还有一道simpleVM改的题，都做做好了。</li>
</ol>
<h2 id="2018-3-21-25"><a href="#2018-3-21-25" class="headerlink" title="2018-3-21-25"></a>2018-3-21-25</h2><p>lctf2017的题目里学到不少东西，另外关于堆利用的姿势实在是不足，此外无libc利用这个也要再学习一下。<br>这几天除了两个project写，还打了强网杯，感觉就是什么都不会吧。。可能不该死磕一道题，应该都看看？…啊啊啊，难受死了，离顶尖水平差的根本不是一点半点……<br>还看了一篇清华的论文，非常nice。<a href="http://jcs.iie.ac.cn/ch/reader/view_abstract.aspx?file_no=20180101&amp;flag=1" target="_blank" rel="noopener">http://jcs.iie.ac.cn/ch/reader/view_abstract.aspx?file_no=20180101&amp;flag=1</a><br>还是有的挫败呢，离别人的水平。</p>
<h2 id="2018-3-26"><a href="#2018-3-26" class="headerlink" title="2018-3-26"></a>2018-3-26</h2><p>1.读玄武每日推送[<a href="http://chuansong.me/n/2253059751415" target="_blank" rel="noopener">http://chuansong.me/n/2253059751415</a>].</p>
<ul>
<li>mark一下<a href="https://rootkits.xyz/blog/2018/03/kernel-uninitialized-heap-variable/" target="_blank" rel="noopener">windows kernel漏洞利用</a>，mark一下k0师傅的<a href="https://whereisk0shl.top/post/2018-03-21" target="_blank" rel="noopener">UBUNTU 16.04 EBPF ARBITRARY READ/WRITE 漏洞分析</a>和360src的<a href="https://cert.360.cn/report/detail?id=ff28fc8d8cb2b72148c9237612933c11" target="_blank" rel="noopener">这篇</a>,看来调kernel还是有的调。</li>
<li>看到的<a href="https://github.com/sashs/arm_exploitation/blob/master/exploitation_on_arm_based_systems.pdf" target="_blank" rel="noopener">ARM exp开发</a>就很简略，感觉学不到什么东西。</li>
<li>mark一个超棒的<a href="http://www.makelinux.net/kernel_map/" target="_blank" rel="noopener">linux kernel交互图</a>，还能在页面上点击跳转到资料<br><img src="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-03-26-LKM3_2048.png" alt=""></li>
<li>还有一个Stack pivoting  exploit的图收了,不知道他们怎么画的图这么好看。<br><img src="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-03-26-030340.jpg" alt=""></li>
<li><a href="https://static1.squarespace.com/static/552092d5e4b0661088167e5c/t/5a00963153450a8779b23489/1509987890282/Windows" target="_blank" rel="noopener">windows注册表审计</a>感觉以后用得到</li>
<li><a href="https://twitter.com/_niklasb/status/977141034059747328" target="_blank" rel="noopener">p2o的沙盒逃逸漏洞</a>这个感觉十分有意思。</li>
<li>blackhat上总有很多好议题，比如这个<a href="https://www.blackhat.com/docs/asia-18/asia-18-Marco-return-to-csu-a-new-method-to-bypass-the-64-bit-Linux-ASLR-wp.pdf" target="_blank" rel="noopener">绕过ASLR的新思路</a></li>
</ul>
<p>2.准备配linux kernel的调试环境，真的是……配不起来啊，双机调试，拉取符号文件，设置串口，改配置开启调试功能。rbq,rbq<br>3.加入了chamd5团队，有师傅一起学pwn，一起讨论真是太棒了QVQ</p>
<h2 id="2018-3-27"><a href="#2018-3-27" class="headerlink" title="2018-3-27"></a>2018-3-27</h2><ol>
<li><p>上午和出强网杯kernel题的师傅聊了一下kernel的调试环境搭建和赛题，师傅人蛮好。。<br>搭建的话，muhe师傅的<a href="https://www.anquanke.com/post/id/85837" target="_blank" rel="noopener">https://www.anquanke.com/post/id/85837</a><br><strong>编译linux 注意去掉不必要的东西，然后编译busybox 然后插入内核  写linux init 最后制作cpio</strong><br>这样就可以qemu+gdb调试了，很nice。</p>
</li>
<li><p>下午和晚上忙各种杂七杂八的事情反正……不过总算还是把要复盘的赛题做完了。</p>
</li>
<li>另外，感觉自己的努力和天赋还是被人肯定的，加油吧，自己QVQ。</li>
</ol>
<h2 id="2018-3-28"><a href="#2018-3-28" class="headerlink" title="2018-3-28"></a>2018-3-28</h2><ol>
<li>人生这种东西，其实就是起起落落落落落落落落落落落落落落落落落落落落落落落落落落落落，23333<br>瞎看了半天linux inside，还看了下linux x86-64 asm，感觉没什么进展。</li>
<li>晚上在知乎提了个问题，别人指了一条很nice的路线给我，还和其他人get了一点点资料，感觉我应该也是可以搞的吧，嗯哼。<br>其实今天一直比较浮躁，还是昨天晚上的一些后遗症吧，还有就是期望和现实的落差……<br>不过冷静的回想一下，不能让自己立刻从舒适区脱离，从新掌握新的知识，那怎么进步呢？且行且努力（乖巧</li>
</ol>
<h2 id="2018-3-29"><a href="#2018-3-29" class="headerlink" title="2018-3-29"></a>2018-3-29</h2><ol>
<li>这几天事挺多的，今天才把blackhat的ppt都下载下来,然后看了下<a href="https://0x00sec.org/t/linux-internals-the-art-of-symbol-resolution/1488" target="_blank" rel="noopener">linux符号解析</a>还发现了一个<a href="https://github.com/elfmaster/skeksi_virus" target="_blank" rel="noopener">正在开发中的linux病毒</a></li>
<li>收集了蛮多linux kernel资料慢慢啃……今天啃了两个ppt，纯英文的那么多……我也是很意外自己读起来没什么障碍的……<br>学什么都要一步一步呀，能调通一个，调试就没什么了，后面的学习速度就看对于kernel和保护的理解了。</li>
</ol>
<h2 id="2018-3-30-31"><a href="#2018-3-30-31" class="headerlink" title="2018-3-30-31"></a>2018-3-30-31</h2><ol>
<li>这两天发生的事情还蛮多的，最近发生的一些事让我觉得，自己调的真洞还是太少，调就要调出来还要能调通，不过说实话吧……浏览器和kernel的洞真的不好调，我学二进制又不久……现在比赛练pwn都来不及，还要分身调洞，确实有点难啊……</li>
<li>不过kernel的ppt啃了俩，感觉纯英文的资料也就那个样子了，读起来还是挺流畅的，要是真的不懂换成中文我也不懂……</li>
<li>把kernel题的环境搭起来了，有师傅请教真的是比自己搞好太多……另外堆的题感觉有感觉了，准备给自己一个比较长的训练周期，比如十天，彻底脑内模拟透，最近进步还是蛮多，加油。<br>mark一个师傅的<a href="http://veritas501.space/2018/03/28/%E4%B8%A4%E6%AC%A1CTF%E6%AF%94%E8%B5%9B%E6%80%BB%E7%BB%93/" target="_blank" rel="noopener">博客</a></li>
</ol>
<h2 id="2018-4-1-3"><a href="#2018-4-1-3" class="headerlink" title="2018-4-1-3"></a>2018-4-1-3</h2><ol>
<li>打了一场0ctf，感觉自己还是太菜，不过在师傅们的帮助下，把能搞懂的题都搞懂了，学到很多很多东西，还是很开心的。</li>
<li>写wp太麻烦了坦白说。。不过还是写吧，不写的话自己都不知道能记得多久……</li>
</ol>
<h2 id="2018-4-4-11"><a href="#2018-4-4-11" class="headerlink" title="2018-4-4-11"></a>2018-4-4-11</h2><ol>
<li>这几天电脑键盘坏了，电脑送修什么都没干。下了个吃鸡手游，嗯，还挺好玩的，今天早上电脑到了删了。</li>
<li>把0ctf2018的4道pwn复盘完了，折腾kernel调试环境。。还是挺麻烦的。</li>
<li>想要的很简单，得到却很难，好想去实验室做安全研究。</li>
</ol>
<h2 id="2018-4-12"><a href="#2018-4-12" class="headerlink" title="2018-4-12"></a>2018-4-12</h2><ol>
<li>今天从qemu+gdb，各种花式报错，到搭建内核的双机调试，简直了……总算最后是勉强在win机器上弄好了。<br>今天得到的一个启发是，先找一个可以用的方案去做，不要想什么一次做到最好，到有机会再换方案。</li>
<li>英语作业还没做……唉……赶作业赶作业……</li>
</ol>
<h2 id="2018-4-13"><a href="#2018-4-13" class="headerlink" title="2018-4-13"></a>2018-4-13</h2><ol>
<li>今天也是一堆事情，睡到中午然后开始做ddctf，那个逆向的mips还有android逆向的RSA，pwn的win kernel exploit真的是有、意思。反正我不想做了，不如学习一个<a href="https://blog.betamao.me/2018/02/26/ptmalloc%E5%B0%8F%E8%AE%B0/" target="_blank" rel="noopener">新姿势</a></li>
<li>linux kernel调试的环境算是彻底搭好了，今天解决了两个昨天没解决的bug，已经可以看到源码了。</li>
</ol>
<h2 id="2018-4-14-15"><a href="#2018-4-14-15" class="headerlink" title="2018-4-14-15"></a>2018-4-14-15</h2><ol>
<li>解决了内核不能单步调试的问题，然后在复习信安数学了。。再不看要凉了</li>
<li>仔细跟了一下poc，感觉还是能看懂的。</li>
</ol>
<h2 id="2018-4-16-17"><a href="#2018-4-16-17" class="headerlink" title="2018-4-16-17"></a>2018-4-16-17</h2><ol>
<li>自己看了下日记，4月除了修电脑配环境，几乎什么都没做，这段时间心态太浮躁了，嗯，加个太，也要准备投几家实习了，本来以为可以拿到的offer，都感觉凉了，不过算了，我是要去实验室做安全研究的人呢。</li>
<li>分析了cve-2017-8890的漏洞成因和模型还有patch</li>
</ol>
<h2 id="2018-4-18"><a href="#2018-4-18" class="headerlink" title="2018-4-18"></a>2018-4-18</h2><ol>
<li>今天也是一堆的课，晚上和师傅们聊天聊八卦去了。。结果只把UAF对象的分配和释放调了调。</li>
<li>了解了一下实验室面试啥的，要好好调CVE了。</li>
</ol>
<h2 id="2018-4-19"><a href="#2018-4-19" class="headerlink" title="2018-4-19"></a>2018-4-19</h2><ol>
<li>看了看师傅们的面试题，觉得其实自己还能再抢救一下。。</li>
<li>今天看了长亭的kernel的洞，感觉分析成因还是很好分析的…但是exp调起来麻烦，也懒得写博客记录了，今天把webkit的调试记录了一下，明明好久之前就搞了，结果到现在还是这样没什么进展（茶</li>
</ol>
<h2 id="2018-4-20-21"><a href="#2018-4-20-21" class="headerlink" title="2018-4-20-21"></a>2018-4-20-21</h2><ol>
<li>编了一天v8，搞不出来，墙真讨厌。</li>
<li>调（看）了一个webkit的UAF漏洞，还行，感觉最难懂的还是对象之间的引用关系太复杂，还有就是回调函数跟着跟着容易找不到自己在哪。<br>“我是谁，谁在打我。”（逃）</li>
</ol>
<h2 id="2018-4-22-24"><a href="#2018-4-22-24" class="headerlink" title="2018-4-22-24"></a>2018-4-22-24</h2><ol>
<li>打了一场*ctf，又学到了新姿势。</li>
<li>在看v8，看JIT，看R大的回答，xjb搜文章，还是不错。</li>
<li>调通了p2o的一个v8的oob的洞，cve-2017-5053,还是不难。</li>
</ol>
<h2 id="2018-4-25-28"><a href="#2018-4-25-28" class="headerlink" title="2018-4-25-28"></a>2018-4-25-28</h2><ul>
<li><p>补一些浏览器的基础吧</p>
</li>
<li><p>学习了一下一个新的内核洞，有新的trick总结</p>
</li>
<li>最近觉得该搞搞利用了，路由器固件也可以玩一下，安全研究这么有趣，什么都能摸一下（才怪</li>
</ul>
<h2 id="2018-4-29-30"><a href="#2018-4-29-30" class="headerlink" title="2018-4-29-30"></a>2018-4-29-30</h2><ol>
<li>国赛打完了，各种不走心，状态奇差，混进赛区半决赛了，CTF也玩到这了吧先，后面好好研究浏览器。</li>
<li>看了Natalie Silvanovich写的How to Find JavaScript Vulnerabilities with Code Review</li>
</ol>
<ul>
<li>Determine intended functionality</li>
<li>Review implementation of important features</li>
<li>Review previously reported bugs</li>
<li>Brainstorm likely vulnerable areas</li>
<li>Review code!<br>Mozilla docs (MDN) is a great start for JS</li>
</ul>
<ol>
<li>想翻一些议题视频看的时候翻到了一个仓库，js vul的，存一下，<a href="https://github.com/tunz/js-vuln-db" target="_blank" rel="noopener">js-vuln-db</a></li>
</ol>
<h2 id="2018-4-31-5-2"><a href="#2018-4-31-5-2" class="headerlink" title="2018-4-31-5.2"></a>2018-4-31-5.2</h2><ol>
<li>看了一个js optimized code<a href="https://www.microsoft.com/en-us/research/video/chakra-script-optimized-code/" target="_blank" rel="noopener">视频</a>，虽然是chakra的<br><img src="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-05-02-074634.png" alt=""><br>不过感觉，有点没用…这些我都知道（</li>
<li>看v8的gc,利用和各种，反正还是挺迷的，先看吧QVQ</li>
<li>看到一幅很棒的图，新的v8的执行图？<br><img src="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-05-02-151804.jpg" alt=""></li>
<li>看webkit技术内幕找灵感，看洞有点看不明白了。</li>
</ol>
<h2 id="2018-5-3"><a href="#2018-5-3" class="headerlink" title="2018-5-3"></a>2018-5-3</h2><ol>
<li>下午在看书，然后突然接了玄武的面试，患得患失吧，之前面试都没这种感觉，可能是因为，玄武是我从刚学二进制，就一直梦想能去的地方。</li>
<li>总结一下面试：<br>CTF和内核这种充数的不算，好歹面的是浏览器组。<br>主要是讲了v8的一个洞，然后oob有一个点没分析清楚，我需要透彻的再搞一下了，还是太菜。<br>感谢给我讲了这个点的sky师傅，面的时候被问到这里真心紧张了。<br>面了45分钟，口干舌燥，最后我提问的时候，问了自己读浏览器源码的方法是否合适，万分期望能过。<br>也问了我对各种缓解机制的了解，然后就是漏洞利用，我讲的每一个洞，都被问了怎么利用，这个答的太差了，真的只是说说思路了，自己搞，写exp，真的没试过……该提升这方面的技能了，不能停滞不前！</li>
<li>CTF暂时不玩了，在拿到offer之前。</li>
</ol>
<h2 id="2018-5-4"><a href="#2018-5-4" class="headerlink" title="2018-5-4"></a>2018-5-4</h2><ol>
<li>webkit技术内幕里关于v8有一些描述，有一些帮助。</li>
<li>理解了一下原型链是什么。</li>
</ol>
<h2 id="2018-5-5-9"><a href="#2018-5-5-9" class="headerlink" title="2018-5-5-9"></a>2018-5-5-9</h2><ol>
<li>有点忘了自己都做了什么？最近做的东西周期越来越长，分开来看每天都没什么好记的（都是借口……最近太兴奋和激动有点摸鱼）</li>
<li>玄武实验室的offer拿到了~我最初想要的都有了，以后只需要往着安全研究员和优秀黑客的方向继续努力就行。</li>
<li>最近有在翻v8的一些日语资料，翻完了会放出来吧，一边看资料一边查资料读slide打基础，还有鲸书准备读。</li>
</ol>
<h2 id="2018-5-10"><a href="#2018-5-10" class="headerlink" title="2018-5-10"></a>2018-5-10</h2><ol>
<li>继续翻v8 exploit的资料，大概翻完了1/3，看到了GC机制那里。</li>
<li>下午上机组实验太伤脑子了……茶，然后最近准备再调一个v8的oob写wp了，不过还得等等…一样一样来。</li>
<li>c++有点不熟了呀，还是要再搞搞……</li>
</ol>
<h2 id="2018-5-11"><a href="#2018-5-11" class="headerlink" title="2018-5-11"></a>2018-5-11</h2><ol>
<li>继续翻v8资料，理解引擎很重要，在此基础上调洞比起靠感觉还是要好点的，纯靠感觉容易偏。</li>
<li>翻完了gc，好像稍微懂一点了。</li>
<li>今天其实发生了很多事情吧，不过不方便写在日记里，就这样吧。</li>
</ol>
<h2 id="2018-5-12"><a href="#2018-5-12" class="headerlink" title="2018-5-12"></a>2018-5-12</h2><ol>
<li>继续翻v8，总算翻到了对象存储（其实这部分该最先讲吧……）</li>
<li>准备信息系统开发的答辩什么的，下周开始要准备复习功课了。</li>
</ol>
<h2 id="2018-5-13-14"><a href="#2018-5-13-14" class="headerlink" title="2018-5-13-14"></a>2018-5-13-14</h2><ol>
<li>今天把v8的ppt的引擎基础部分翻完了，入职的事情也都搞的差不多了，剩下就是在去之前好好努力了。</li>
<li>感觉路由器这种硬件可以玩玩……相对好挖洞呢。。</li>
</ol>
<h2 id="2018-5-15-6-9"><a href="#2018-5-15-6-9" class="headerlink" title="2018-5-15-6-9"></a>2018-5-15-6-9</h2><p>这段时间沉迷期末考试无法自拔？？？嘤嘤嘤<br>有个小插曲，因为弄错了考试时间导致挂科，吃一堑长一智。。回去我就把那个误导我的垃圾学校app日了。。<br>好了，开始记笔记了。</p>
<h2 id="2018-6-10-11"><a href="#2018-6-10-11" class="headerlink" title="2018-6-10-11"></a>2018-6-10-11</h2><p>把v8 exploit的PPT翻译收了个尾，重新整理了下v8的学习思路。<br>从漏洞函数回溯调用路径，断点调试等，还有exp的常用思路。</p>
<h2 id="2018-6-12-14"><a href="#2018-6-12-14" class="headerlink" title="2018-6-12-14"></a>2018-6-12-14</h2><p>最近脚上起了个小疮去了两趟医院，走路还好疼，真的是非常不顺利了。</p>
<h2 id="2018-6-15"><a href="#2018-6-15" class="headerlink" title="2018-6-15"></a>2018-6-15</h2><p>在mac上编译了v8，之前是在win上编译的，不得不说……有个坑点就是在16.04上面，不checkout到旧的分支，是无法编译成功的，耽误了一天。<br>然后认真的研究了一下fast Properties和hidden class，拿gdb打debugprint看了很多东西学习，记笔记记笔记。</p>
<h2 id="2018-6-16"><a href="#2018-6-16" class="headerlink" title="2018-6-16"></a>2018-6-16</h2><p>翻译了Source to Binary Jounrney of V8 javascript engine<br>categories，get了新知识，v8的体系结构还要多调试理解。<br>另外，再需要啃一本鲸书，理解一下编译优化技术。</p>
<h2 id="2018-6-17"><a href="#2018-6-17" class="headerlink" title="2018-6-17"></a>2018-6-17</h2><p><img src="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-06-18-180229.png" alt="">积累着读了一点PPT<br>突然发现也已经看了和写了，还调试了不少东西了，慢慢的对v8从生疏到开始渐渐熟悉，不过到挖掘漏洞的方法论可能还要再过一段时间吧。<br>毕竟v8代码我都没咋读过，翻翻pipeline.cc了解下Turbofan的一些API</p>
<h2 id="2018-6-18"><a href="#2018-6-18" class="headerlink" title="2018-6-18"></a>2018-6-18</h2><p>学习了阅读v8的bytecode，和了解bytecode的生成和解释执行还有to graph的过程</p>
<h2 id="2018-6-19"><a href="#2018-6-19" class="headerlink" title="2018-6-19"></a>2018-6-19</h2><p>今天开始要复习一点算法呢。<br>学习了v8增加的gdb命令使用,读了<br><a href="https://github.com/danbev/learning-v8/blob/master/README.md" target="_blank" rel="noopener">https://github.com/danbev/learning-v8/blob/master/README.md</a><br>真的难懂，看了一下午，没什么头绪。。<br><img src="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-06-19-115842.jpg" alt=""><br>关于代码生成，Builtins和Runtime还是云里雾里，头疼。<br>写了个小工具来转换unsigned long long和double<br>v8的对象存储又看了一遍。。。结果今天还是没复习算法。。睡觉睡觉。</p>
<h2 id="2018-6-20-21"><a href="#2018-6-20-21" class="headerlink" title="2018-6-20-21"></a>2018-6-20-21</h2><p>搬家，寄了一些东西回家，整理了整理书，虽然我看的都是电子书，但是还是存了这么多呀。<br>三年不长，但也不短。<br><img src="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-06-21-173058.jpg" alt=""><br>晚上收拾了我最后一点东西，把入职需要的材料办完，要走了呢。</p>
<h2 id="2018-6-22-23"><a href="#2018-6-22-23" class="headerlink" title="2018-6-22-23"></a>2018-6-22-23</h2><p>复习了几道动态规划的算法题，要考试啦。<br>另外最好的消息是迟到了。。只做了十分钟的计算机组成原理居然及格了。。感谢老师，师生情太深了，感动感动。<br>这段时间发生了不少事情，然后让我又想明白了一些事情，这段时间确实，没怎么学的进去，学的并不好。<br>今天看了蛮久的漏洞，不知道其他人是什么样，但是在我最烦最难受的时候，安全研究是最能让我平静下来的一件事情。<br>我喜欢这样，虽然目前很多地方做的并不好，但是可以慢慢学习~<br>写了个case CVE-2016-1646，还有另外一个JIT的洞，有点难懂。</p>
<h2 id="2018-6-24-25"><a href="#2018-6-24-25" class="headerlink" title="2018-6-24-25"></a>2018-6-24-25</h2><p>调v8一个麻烦就是编译，得想个办法.<br><a href="http://eternalsakura13.com/2018/06/26/v8_environment/">http://eternalsakura13.com/2018/06/26/v8_environment/</a><br>总算是搞定了，最近一些技术文章读的少了，思路不够开阔，学习学习……<br>还有算法考试要到了。。趴桌，继续在看动态规划和贪婪</p>
<h2 id="2018-6-26"><a href="#2018-6-26" class="headerlink" title="2018-6-26"></a>2018-6-26</h2><p>学习了CVE-2016-5198，原理就是在JIT优化之后，会直接从n中取出直接取出自定义属性数组中，对应于某属性偏移的字段，而不做任何合法性校验。</p>
<p>都还需要总结（</p>
<h2 id="2018-6-27-28"><a href="#2018-6-27-28" class="headerlink" title="2018-6-27-28"></a>2018-6-27-28</h2><ol>
<li>看了一些内核的资料，整理整理，顺便给人鸡汤了一下。。</li>
<li>刷算法，准备期末。。凉了啊。。</li>
</ol>
<h2 id="2018-6-29"><a href="#2018-6-29" class="headerlink" title="2018-6-29"></a>2018-6-29</h2><ol>
<li>累的要死的一天,飞机晚点了三个小时，卒……</li>
<li>看了一些资料，学会了如何成为一个合格的安全研究员（打了鸡血</li>
<li>在mathias这里住下了~New story要开始了</li>
</ol>
<h2 id="2018-6-30-7-2"><a href="#2018-6-30-7-2" class="headerlink" title="2018-6-30-7-2"></a>2018-6-30-7-2</h2><ol>
<li>这两天在忙着入职，装电脑和认识同事。</li>
<li>和导师说了自己最近在做什么，从tools和Bug study的角度，然后他让我继续搞v8，得偿所愿，不过估计要干活要明天了，说是要分析的洞还没给我。</li>
<li>[ Browser ]  Microsoft Edge Chakra 引擎 UAF 漏洞分析 (CVE-2018-0946)：<a href="https://www.fortinet.com/blog/threat-research/an-analysis-of-the-use-after-free-bug-in-microsoft-edge-chakra-engine.html" target="_blank" rel="noopener">https://www.fortinet.com/blog/threat-research/an-analysis-of-the-use-after-free-bug-in-microsoft-edge-chakra-engine.html</a><br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1534&amp;desc=3" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1534&amp;desc=3</a></li>
<li>[ Browser ] CVE-2018-5146<br><a href="http://blogs.360.cn/blog/how-to-kill-a-firefox/" target="_blank" rel="noopener">http://blogs.360.cn/blog/how-to-kill-a-firefox/</a><br>A神之前就说在写一个没有poc的exp，不知道是不是这个洞，突然想到。<br>others（同事写的root cause和exploit，还有怎么用shadow来分析堆，很有意义。</li>
<li>看了鲸书1-4章，不少熟悉的名词……interesting</li>
</ol>
<h2 id="2018-7-3"><a href="#2018-7-3" class="headerlink" title="2018-7-3"></a>2018-7-3</h2><p>刚入职这段时间确实是最宽松的一段时间了，只需要学习就行了，没有什么其他KPI，后面应该就多了。<br>今天分析CVE-2017-0234，不过主要花时间都花在环境搭建上，漏洞触发和分析并不难，或者说还好。</p>
<h2 id="2018-7-4"><a href="#2018-7-4" class="headerlink" title="2018-7-4"></a>2018-7-4</h2><ol>
<li>今天把CVE-2017-0234的分析报告初版写完了，掌握了vs和windbg的两种很棒的调试方法，然后在编译v8，算是学到了一点东西，得再加强code review的能力。</li>
<li>成功在win上编译好了v8，可以玩一下。</li>
</ol>
<h2 id="2018-7-5"><a href="#2018-7-5" class="headerlink" title="2018-7-5"></a>2018-7-5</h2><ol>
<li>0234还要分析第二版，不过还不急，今天在自己分析其他v8的漏洞，一个p2o的洞的利用，思路真是棒，学到了学到了~<br><a href="https://docs.google.com/document/d/1tHElG04AJR5OR2Ex-m_Jsmc8S5fAbRB3s4RmTG_PFnw/edit" target="_blank" rel="noopener">https://docs.google.com/document/d/1tHElG04AJR5OR2Ex-m_Jsmc8S5fAbRB3s4RmTG_PFnw/edit</a></li>
</ol>
<h2 id="2018-7-6"><a href="#2018-7-6" class="headerlink" title="2018-7-6"></a>2018-7-6</h2><ol>
<li>上班摸鱼好几天，今天下午听了各个大佬每周做的事情和科总的分享，觉得要走的路还很长。</li>
<li>目前的计划：<br>先看一些代码和语言标准；<br>talk和blog（可以看看如何移植v8，并思考其中可能出现的漏洞<br>Firefox的<a href="https://github.com/MozillaSecurity/funfuzz/tree/master/src/funfuzz/js/jsfunfuzz" target="_blank" rel="noopener">fuzz</a>（编译原理不止要领会意义，更要能写出来。<br>另外是关于win下用到了v8的各种软件的调试，也是一个学习面（比如可以看看漏洞战争等资料学习windbg和常规利用）</li>
</ol>
<p><strong>你要用较少的时间走完别人走了很久的路，所以你要跑起来，要飞快地跑起来。</strong></p>
<ol>
<li>和导师聊过自己分析的第一版漏洞，发现很多问题，我需要更深入的思考。其实安全研究有点像一个侦探游戏，每一行都是线索，我漏掉一点东西就拼不出完整的拼图。（因缺思厅<br>PoC能否修改？怎么修改？思考如下：</li>
</ol>
<ul>
<li>不同的对象能否触发？举例：一定要是Uint32Array或者ArrayBuffer么?</li>
<li>是否一定用到循环？去掉循环行不行？怎么精简PoC?<br>为什么JIT优化去掉边界？它为什么会去掉边界？（和4GB有关，这种特殊的buffer分配方式）<br>（去掉边界的代码是三行，代表一个JIT生成的可选项，为什么要这么选？）</li>
</ul>
<h2 id="2018-7-7"><a href="#2018-7-7" class="headerlink" title="2018-7-7"></a>2018-7-7</h2><ol>
<li>今天上午去办了个房卡，一个月4000，押二付一，资产清零2333，其实居住条件就一般啦，只是离公司近，方便加班（摸鱼）</li>
<li>今天和朋友聚了个餐，以后就全吃公司救济粮了~</li>
<li>继续看0234，直接挂win API没调到点子上，但是最后还是换了个想法搜到了。。还行。。方向没错。</li>
<li>思考和调试新的攻击方法，趴桌。</li>
</ol>
<h2 id="2018-7-8"><a href="#2018-7-8" class="headerlink" title="2018-7-8"></a>2018-7-8</h2><ol>
<li>把0234第二版写好了（调试分析昨天已经结束了，今天只是整理文案……）</li>
<li>然后看c++对象模型，很有意思。</li>
<li>研究了一下js fuzzer</li>
<li>继续思考和调试某个洞（或者说软件）的新的攻击方法。</li>
</ol>
<h2 id="2018-7-9"><a href="#2018-7-9" class="headerlink" title="2018-7-9"></a>2018-7-9</h2><ol>
<li>下午就是在部署fuzz和抄代码,然后xx发了个webkit的洞，我看看……还有公司推送了一个dlmalloc的。。都看看</li>
<li>导师说我写的FUZZ是浪费时间2333，嗯，是这样的，我不用太心急，这就是有人带的好处……很多点能够及时纠正（然后一下午没了2333<br>沿着各个组件，各个组件都出过什么漏洞这个线索去分析好了，人的力量才是无穷大的。<br>嗯，先把思路和相关知识建立起来。</li>
</ol>
<h2 id="2018-7-10-11"><a href="#2018-7-10-11" class="headerlink" title="2018-7-10-11"></a>2018-7-10-11</h2><ol>
<li>在这找test看，<a href="https://cs.chromium.org/chromium/src/v8/test/mjsunit/es6/regress/" target="_blank" rel="noopener">https://cs.chromium.org/chromium/src/v8/test/mjsunit/es6/regress/</a></li>
<li>v8相关的索引，<a href="https://v8.paulfryzel.com/docs/master/index.html" target="_blank" rel="noopener">https://v8.paulfryzel.com/docs/master/index.html</a></li>
<li>看每天的commit，<a href="https://github.com/v8/v8/commits/master" target="_blank" rel="noopener">https://github.com/v8/v8/commits/master</a></li>
<li>看gpz的漏洞，每天写一篇分析（当然不可能放出来（逃<br><a href="https://www.exploit-db.com/author/?order_by=date_published&amp;order=desc&amp;pg=1&amp;a=7725" target="_blank" rel="noopener">https://www.exploit-db.com/author/?order_by=date_published&amp;order=desc&amp;pg=1&amp;a=7725</a></li>
<li>最近在思考一些个人研究是否要放博客上，仔细想了想还是算了，漏洞理解的思路，比很多东西要宝贵吧。</li>
</ol>
<h2 id="2018-7-12"><a href="#2018-7-12" class="headerlink" title="2018-7-12"></a>2018-7-12</h2><ol>
<li>现在想要挖到洞，想学会漏洞利用，顺便，月乃安利了一个repo,PPP的<a href="https://github.com/theori-io/pwnjs" target="_blank" rel="noopener">https://github.com/theori-io/pwnjs</a></li>
<li>这两天可能因为一些原因心情异常烦躁，一方面是弱的不行的自己，一方面是想要的更多，哇，真想哭……好了，杂事就不管了，我又不是神，怎么可能面面俱到。</li>
<li>闭关，博客会更新日记，在有一定系统化的总结思路之前，博客不会再更新文章了（日更变月更？）</li>
</ol>
<h2 id="2018-7-13"><a href="#2018-7-13" class="headerlink" title="2018-7-13"></a>2018-7-13</h2><p>今天开了个组会，可以说是非常开心了……<br>每天东看瞎看，没看点有用的东西……（发呆</p>
<p>然后导师给了我下一版要继续分析清楚的点。</p>
<ol>
<li>VritualAlloc分配的和GC管理的区别，GC机制</li>
<li>开发者为什么这么设计这个？为什么之前不限制4GB<br>（明明超过4GB就会OOB，为什么还去掉上界，他们就真的是觉得4GB足够大？其实不是；patch补的其实是没问题的，虽然依然可以dos，但是这个不是大问题，应该还是要从GC的角度去再思考一下，或者其他？）</li>
<li>这个内存管理是实现有问题还是设计有问题？实现有问题那么还有哪些地方是这么实现的，设计同理。要比开发者更了解他们所写的软件（：<br>安全研究的本质还是回归到对开发者的代码的深层次理解，一层一层的往下深挖，才能挖到线索，挖到真相（</li>
</ol>
<p>太菜了太菜了……受不了我自己了……<br>今天的收获是和刘炜师傅指点了我好多，一些源码里的疑问搞的清楚了，还解决了其他问题，nice……每天学的都比较痛并快乐着了。</p>
<h2 id="2018-7-14"><a href="#2018-7-14" class="headerlink" title="2018-7-14"></a>2018-7-14</h2><p>一觉睡到下午一点半……23333，还好周末，不过平常起得也不早，还好在玄武，要不然要被开了……（360打卡<br>然后晚上和川神还有夜影他们约了个饭，感觉还不错~(然后吃完了滚回来加班)<br>今天看了点chakra，分析了cve-2016-7189，用英文写了wp，明天再整理一下pattern（root cause比较好写，只是关于callback我调了一下，挺好玩的）<br>type confused还是很普遍的漏洞，但是其实还是不大好覆盖到每个点去看，有没有什么好思路呢（发呆</p>
<h2 id="2018-7-15-18"><a href="#2018-7-15-18" class="headerlink" title="2018-7-15-18"></a>2018-7-15-18</h2><p>这几天真的有点懵……或者说有点迷茫，开始搞chakra，代码还是那么难啃，不过比v8好搞多了……<br>关于开发者的假设最后还是弄清楚了，其实就还好，是我分析的时间间隔有点长，没直接串起来，一个宽度问题。<br>在想明白之前觉得自己要被开了，现在还好。<br>今天游走了一天，把zdi的博客上的一些分析看了，有点意思，但是还不够。<br>另外我又要继续分析了。<br>为什么VirtualAlloc比GC更不安全，GC机制。<br>导师让我找几个渲染引擎的老的UAF洞看看~（估计就16年的吧<br>感觉又要踩坑……<br>搭了一个VPN服务器，这样就不用担心v8拉取不下来了……<br><a href="https://cloud.tencent.com/developer/article/1154896" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1154896</a><br>人生苦短我用docker</p>
<h2 id="2018-7-19-24"><a href="#2018-7-19-24" class="headerlink" title="2018-7-19-24"></a>2018-7-19-24</h2><ol>
<li>看了看雪峰会，sky师傅讲浏览器的议题很有意思。</li>
<li>看洞，整理一些loki的洞看。</li>
<li>准备开始JIT之旅<br>TODO List</li>
</ol>
<p>中科大的编译原理课程，比较简单<br><a href="http://mooc.study.163.com/course/1000002001?tid=1000003000#/info" target="_blank" rel="noopener">http://mooc.study.163.com/course/1000002001?tid=1000003000#/info</a><br><a href="http://staff.ustc.edu.cn/~bjhua/courses/compiler/2014/" target="_blank" rel="noopener">http://staff.ustc.edu.cn/~bjhua/courses/compiler/2014/</a></p>
<p>斯坦福的CS143，编译基础<br><a href="https://lagunita.stanford.edu/courses/Engineering/Compilers/Fall2014/about" target="_blank" rel="noopener">https://lagunita.stanford.edu/courses/Engineering/Compilers/Fall2014/about</a><br>斯坦福的CS243，编译优化<br><a href="http://infolab.stanford.edu/~ullman/dragon/w06/w06.html" target="_blank" rel="noopener">http://infolab.stanford.edu/~ullman/dragon/w06/w06.html</a></p>
<p>CMU，编译基础<br><a href="http://www.cs.cmu.edu/~rjsimmon/15411-f15/" target="_blank" rel="noopener">http://www.cs.cmu.edu/~rjsimmon/15411-f15/</a><br>CMU，编译优化<br><a href="http://www.cs.cmu.edu/afs/cs.cmu.edu/academic/class/15745-s16/www/" target="_blank" rel="noopener">http://www.cs.cmu.edu/afs/cs.cmu.edu/academic/class/15745-s16/www/</a></p>
<ol>
<li>pizlo的PPT很nice<br><a href="http://www.filpizlo.com/slides/pizlo-dls2017-vmil2017-jscvm-slides.pdf" target="_blank" rel="noopener">http://www.filpizlo.com/slides/pizlo-dls2017-vmil2017-jscvm-slides.pdf</a></li>
<li>开始0236……</li>
</ol>
<h2 id="2018-7-25-26"><a href="#2018-7-25-26" class="headerlink" title="2018-7-25-26"></a>2018-7-25-26</h2><p>分析漏洞更深入了，思考的过程和思路慢慢搭起来了。<br>今天开始看编译原理。记录一些有趣的问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">perfect hashing</span><br><span class="line">1. 什么是（关键字的）完美哈希？</span><br><span class="line">没有关键字冲突的哈希函数</span><br><span class="line">2. 如何构造完美哈希？试列举一到两种算法。</span><br><span class="line">目前用的比较多的是gperf算法</span><br><span class="line">为什么需要构造完美哈希？用关键字单链表是否f可以？</span><br><span class="line">因为完美哈希一次匹配，的时间效率为O(1),而链表要扫描一遍，时间效率为O(N)</span><br></pre></td></tr></table></figure></p>
<p>正则表达式代码生成工具<br><a href="http://www.txt2re.com/" target="_blank" rel="noopener">http://www.txt2re.com/</a><br>NFA-&gt;DFA,有限状态自动机</p>
<p>递归下降分析算法<br>LL(1),ANTIR</p>
<h2 id="2018-7-27"><a href="#2018-7-27" class="headerlink" title="2018-7-27"></a>2018-7-27</h2><p>总结一下今天，组会上分享的刚好是浏览器相关的东西，学到很多，此外最重要的是听了别人每周在干什么，也慢慢的知道了自己以后研究该看什么。<br>*日常被导师吐槽东看瞎看，看的深度不够没有意义2333<br>此外就是在看编译原理了，JIT始终是一个大的攻击面，而且写js/dom fuzz也绕不开编译原理，要吃掉这块始终不容易。。我还是太菜了。</p>
<h2 id="2018-7-28-29"><a href="#2018-7-28-29" class="headerlink" title="2018-7-28-29"></a>2018-7-28-29</h2><ol>
<li>这两天看了realworld ctf,和继续学习编译原理,看的还算快。。</li>
<li>spectre的漏洞利用和同事聊了一下，还是没做出来这个题，等官方wp学习一下，说来长亭这个比赛很有意思了……<br>说来vm escape已经变成常规题了……23333，可以学习一个了…<br>代码量还是不够啊，等这段时间搞完，就大量抄和读了……（没什么自己的需求，就不自己写了）<br>积累积累积累</li>
</ol>
<h2 id="2018-7-30"><a href="#2018-7-30" class="headerlink" title="2018-7-30"></a>2018-7-30</h2><p>终于看得懂《IFuzzer: An Evolutionary Interpreter Fuzzer<br>Using Genetic Programming》说的什么了。<br>不过确实有局限性，充其量是个demo，想自己写一个了。<br>commit要看，标准要读，漏洞要调，代码要写。<br>小孩子才做选择，我全都要。</p>
<h2 id="2018-7-31-8-2"><a href="#2018-7-31-8-2" class="headerlink" title="2018-7-31-8-2"></a>2018-7-31-8-2</h2><p>ctf pwn中的v8漏洞利用的坑差不多结了。。思路很多但是终究还是那些东西，利用都是好搞的，回归挖洞（笔记不放）</p>
<p>学会用antlr4（词法/语法分析）写点东西开了个头。。不过预计搞起来也很快<br>（IFuzzer: An Evolutionary Interpreter Fuzzer using Genetic Programming）<br>主要是参考这篇paper学习一下，有很多想法了。</p>
<p>然后剩下的主要工作就是学习编译优化，审计一下v8的JIT（看刘炜师傅写的两篇wp很有启发，看得出他对v8 IR有很多理解了，我也可以就这一块多做一些总结输出。。。</p>
<p>和朋友聊了一下，有的东西没有想象中的难，赶紧做出点东西，然后往前走吧。</p>
<h2 id="2018-8-3"><a href="#2018-8-3" class="headerlink" title="2018-8-3"></a>2018-8-3</h2><ol>
<li>日子一天天的过……今天发工资了蛮开心2333</li>
<li>今天分享的东西蛮有意思，听大家说这周做了什么，关于Fuzz的讨论也有意思，貌似有点上路了，这些基础的积累都是有意义的。</li>
<li>这周清理了一些坑，然后挖了更多坑，结了antlr4之后准备开始污点分析之旅了。<br>顺手列一下煜博推荐的paper：<br>All You Ever Wanted to Know About<br>Dynamic Taint Analysis and Forward Symbolic Execution (but might have been afraid to ask)<br>VUzzer: Application-aware Evolutionary Fuzzing<br>Towards Efficient Heap Overflow Discovery</li>
<li>发现一个好玩的网站的样子：<a href="http://www.vxjump.net/" target="_blank" rel="noopener">http://www.vxjump.net/</a></li>
<li>最后再贴一个编译优化的，还是CMU的，不过年份不同。<br><a href="http://www.cs.cmu.edu/afs/cs/academic/class/15745-s06/web/schedule.html" target="_blank" rel="noopener">http://www.cs.cmu.edu/afs/cs/academic/class/15745-s06/web/schedule.html</a></li>
<li>本来最后了，不过还有新的最后，……<br>sky师傅和我讲下一步干嘛了。</li>
</ol>
<p>最后和我说了一下，其实ArrayBuffer的这种分配方式，可以完美bypass 64位ASLR<br>其实这里又涉及一个点，那就ASLR的必要条件是虚拟地址空间足够大，而我们的物理地址空间很小，不可能堆喷喷满。<br>但是……我们可以用0x10000的内存去占位4G，那么其实只要喷2G就可以了……这就bypass了，2333</p>
<p>这些小特性，大特性，系统特性，各种特性的深入理解和消化绝对是十分重要的。<br>我体验了一次如何从0234发现0236的过程，收获颇丰。</p>
<h2 id="2018-8-4-9"><a href="#2018-8-4-9" class="headerlink" title="2018-8-4-9"></a>2018-8-4-9</h2><ol>
<li>结束了antlr4的学习，fuzz进程挂起。</li>
<li>开始看v8源码，真多……真难懂2333……我好菜。</li>
<li>听同事说，有人看了两个月编译优化被开了。。好方。。加班看书看到2点。。<br>找到一个不错的PPT。<a href="http://sei.pku.edu.cn/~xiongyf04/SA/2015/" target="_blank" rel="noopener">http://sei.pku.edu.cn/~xiongyf04/SA/2015/</a></li>
<li>今天和sky师傅聊了一下，收获很多，思路很重要，不仅是挖洞的思路，调洞的思路，学习的思路，分析的思路，都很重要。</li>
<li>今天花时间整理了一下gpz的洞和bugs上能找到的JIT的洞，还是挺凌乱的，也开始思考一些JIT的攻击面的本质，结点的处理等等，把文件都翻了一下。</li>
</ol>
<h2 id="2018-8-9-18"><a href="#2018-8-9-18" class="headerlink" title="2018-8-9-18"></a>2018-8-9-18</h2><ol>
<li>好像很久没写日记了。。不知道为什么。。可能是突然泄气，人的情绪总是飘忽不定，对我们这种人更是如此。</li>
<li>还是写一下这段时间做了什么，还是JIT、JIT、JIT，说来我是从什么时候开始想要挖浏览器漏洞呢？为什么选择这么一条路呢？回忆一下又觉得当年浪费了太多时间在无意义的事情上（比如CTF，Android），应该好好看webkit的……叹气<br>不过说来这几天看到的JIT的资料还不错，大宝写了JIT漏洞的分析。<br><a href="http://www.filpizlo.com/slides/pizlo-icooolps2018-inline-caches-slides.pdf" target="_blank" rel="noopener">http://www.filpizlo.com/slides/pizlo-icooolps2018-inline-caches-slides.pdf</a><br><a href="https://saelo.github.io/presentations/blackhat_us_18_attacking_client_side_jit_compilers.pdf" target="_blank" rel="noopener">https://saelo.github.io/presentations/blackhat_us_18_attacking_client_side_jit_compilers.pdf</a><br><a href="https://blogs.projectmoon.pw/2018/08/17/Edge-InlineArrayPush-Remote-Code-Execution/" target="_blank" rel="noopener">https://blogs.projectmoon.pw/2018/08/17/Edge-InlineArrayPush-Remote-Code-Execution/</a><br>从目前js引擎的攻击面来看，wasm和JIT可能是最可能出洞的点了。。也不好搞也不好搞2333<br><a href="https://googleprojectzero.blogspot.com/2018/08/the-problems-and-promise-of-webassembly.html" target="_blank" rel="noopener">https://googleprojectzero.blogspot.com/2018/08/the-problems-and-promise-of-webassembly.html</a></li>
<li>周六睡到中午，然后去了长亭的“无pwn不欢”线下沙龙，领了衣服和杯子，感动。<br>冠成大佬的分享很nice，似乎一下子点出了我觉得逆向越来越迷的关键……<br><a href="https://github.com/A7um/slides/blob/master/2018/re_methodology.pdf" target="_blank" rel="noopener">https://github.com/A7um/slides/blob/master/2018/re_methodology.pdf</a><br>链接:<a href="https://pan.baidu.com/s/1K6Wdj1L6Dt5LJb7R-7GLhA" target="_blank" rel="noopener">https://pan.baidu.com/s/1K6Wdj1L6Dt5LJb7R-7GLhA</a>  密码:jgks</li>
<li>之前冠成大佬经常逆国产小软件挖洞，然后我一直不知道是咋搞的。。<br><strong>现在想想，或许能够熟练的掌握trace+disassembly/指令记录+分析，这样的一种逆向能力，是十分重要的（如果是国产小软件，再加上如何从二进制文件搜索开源代码吧）</strong><br><strong>至于说，和做CTF一样，逆向各种神奇的架构和算法，我觉得是没必要的。</strong><br>嘛，虽然我还都不会，不过姑且给自己找到了一个学习的思路和方法，还是收获蛮多。</li>
<li>这段时间的主要工作是在分析CVE-2017-5121，关于v8 escape analysis phase，不过没有patch，这个漏洞是发生在6.1版本之前，6.2之后换掉了整个escape analysis，重新实现了一遍。<br>漏洞有几个主要表现<br>首先从debug版本里有一个验证函数，在这里触发崩溃，在本来未逃逸的对象会被标记为Virtual，并会在reduce结束的时候被全部处理，但是在验证的时候，发现仍有Virtual存在<br>从release版本，也是我目前分析的来看，是在一串Prototype chain访问上，比如说PoC就是在访问o.b.ba.bab的时候，本来应该是o.b.ba.bab，但是在实际进行的时候，则是优化成了ba.bab，但是由于ba未逃逸，被优化掉，导致ba未初始化。（存疑<br>而实际访问的时候，是ba+offset，现在只有offset，就crash了。（存疑<br>不过现在还没有进一步的进度，我目前知道的，是应该是这个漏洞的根源在于escape analysis之后，在reduce的时候，进行的replacement reductions，也就是一种用字段去代替原本的对象的优化。（存疑<br>这个漏洞是微软chakra团队fuzz出来的，微软详细的分析了漏洞的利用，不过我没怎么看，它对漏洞root cause的分析就是只通过v8的IR可视化图上，看到对ba节点的StoreField opcode（初始化）被从IR优化掉，我感觉要么这个地方后面还有很多洞，所以他们没公开，要么就是不大好分析了。<br>然后为了进一步做研究，我把这个phase整个看了一下，分析了一下流程，了解大概的特性。<br>然后重点对LoadField，StoreField，Allocate这几个opcode的处理，如何设置逃逸，如何reduce，怎么replace去分析。<br>现在的主要任务还是分析吧，JIT的每个phase和出问题的点都好好学习一下，还有很多地方可以学习。。<br><em>希望不要学着学着被开了……（很有可能ORZ）</em></li>
</ol>
<h2 id="2018-8-19"><a href="#2018-8-19" class="headerlink" title="2018-8-19"></a>2018-8-19</h2><ol>
<li>真的是硬生生赖床到一点半，饿的要死了才爬起来上班……</li>
<li>试图去搜和v8有关的design paper读，但是没找到，ORZ。。浪费时间。。</li>
<li>分析load elimination phase，学到不少东西。</li>
</ol>
<h2 id="2018-8-20"><a href="#2018-8-20" class="headerlink" title="2018-8-20"></a>2018-8-20</h2><p>我觉得挖edge怕不是loki的KPI吧。。又是挖了一堆，其中有一个还和大宝的撞了，是不是大佬的思路都是一样的……ORZ<br>今天可以分析学习一个。<br>今天各种填学校回去要交的材料，然后申请盖章，ORZ。<br>各种麻烦死。<br>然后下午找刘炜师傅请教了一点sea of nodes的问题，自己看得死多少脑细胞。。。</p>
<ul>
<li>[Edge]  [CVE-2018-8298] [1582]   1582 - Microsoft Edge: Chakra: Bugs in InitializeNumberFormat and InitializeDateTimeFormat - project-zero - Monorail<br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1582" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1582</a></li>
<li>[Edge]  [None] [1578]   1578 - Microsoft Edge: Chakra: JIT: Type confusion with InlineArrayPush - project-zero - Monorail<br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1578" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1578</a></li>
<li>[Edge]  [CVE-2018-8291] [1576]   1576 - Microsoft Edge: Chakra: DictionaryPropertyDescriptor::CopyFrom doesn’t copy all fields - project-zero - Monorail<br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1576" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1576</a></li>
<li>[Edge]  [CVE-2018-8279] [1570]   1570 - Microsoft Edge: Chakra: Parameter scope parsing bug - project-zero - Monorail<br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1570" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1570</a></li>
<li>[Edge]  [CVE-2018-8288] [1565]   1565 - Microsoft Edge: Chakra: JIT: ImplicitCallFlags check bypass with Intl - project-zero - Monorail<br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1565" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1565</a></li>
</ul>
<h2 id="2018-8-21"><a href="#2018-8-21" class="headerlink" title="2018-8-21"></a>2018-8-21</h2><ol>
<li>昨天看的一点点东西更新了一篇笔记，就当理理思路了。</li>
<li>昨天要的证明总算开下来了，心里松了一口气，下面调整一下自己的作息，好好工作了。</li>
<li>R大讲了一些turboFan IR设计的东西，给了一些paper读，非常nice<br><a href="https://www.zhihu.com/question/290982869/answer/474629999" target="_blank" rel="noopener">https://www.zhihu.com/question/290982869/answer/474629999</a></li>
<li>最近在调的那个洞，通过改源码，打印遍历路径，确实看到了一些不一样的东西，差不多分析了0.1吧。。明天继续磕</li>
<li>v8新出了一个wasm的编译器Liftoff好像，又有新东西可以看了ORZ<br><a href="https://v8project.blogspot.com/2018/08/liftoff.html" target="_blank" rel="noopener">https://v8project.blogspot.com/2018/08/liftoff.html</a></li>
<li>和学长聊天，原来他刚毕业那会还在keen team实习过，那时候科恩还没并入腾讯。</li>
</ol>
<h2 id="2018-8-22-23"><a href="#2018-8-22-23" class="headerlink" title="2018-8-22-23"></a>2018-8-22-23</h2><ol>
<li>这周末就要跑路了，这个洞还没分析的很好，不过还是学到了不少东西。<br>JIT里面的算法相关的代码看了不少了，还读了paper，找到了一些IR的paper读。<br>trace的log基本能看懂不少了。<br>心态平和了很多，虽然我还是看不懂并且很可能一直看不懂ORZ。</li>
<li>不过总算写好了第一版报告。</li>
</ol>
<h2 id="2018-8-24-25"><a href="#2018-8-24-25" class="headerlink" title="2018-8-24-25"></a>2018-8-24-25</h2><ol>
<li>我一直不是一个很聪明的人，但是我确实是一个喜欢隔一段时间反思一下自己的人，重新审视了一下从7-8月我所学，其实本来我能做的更好，只是因为自己的懒和菜没有看更多，也该收拾心情往前走了。</li>
</ol>
<h2 id="2018-8-26-31"><a href="#2018-8-26-31" class="headerlink" title="2018-8-26-31"></a>2018-8-26-31</h2><ol>
<li>回了一趟学校，把外出实习申请和体测搞完了，然后sky师傅让我准备一个分享。。ORZ，我咋都不会啊，好方，在线等挺急的。</li>
<li>收到留用短信，还是蛮开心，加油加油。</li>
<li>v8 GC相关的东西准备看一下，先罗列一下资源</li>
</ol>
<ul>
<li>Are your v8 garbage collection logs speaking to you?Joyee Cheung -Alibaba Cloud(Alibaba Group)<br><a href="https://www.slideshare.net/NodejsFoundation/are-your-v8-garbage-collection-logs-speaking-to-youjoyee-cheung-alibaba-cloudalibaba-group" target="_blank" rel="noopener">https://www.slideshare.net/NodejsFoundation/are-your-v8-garbage-collection-logs-speaking-to-youjoyee-cheung-alibaba-cloudalibaba-group</a><br><a href="https://www.youtube.com/watch?v=DSBLAG2IvsY" target="_blank" rel="noopener">https://www.youtube.com/watch?v=DSBLAG2IvsY</a></li>
<li>Jank Busters Part Two: Orinoco<br><a href="https://v8project.blogspot.com/2016/04/jank-busters-part-two-orinoco.html" target="_blank" rel="noopener">https://v8project.blogspot.com/2016/04/jank-busters-part-two-orinoco.html</a></li>
<li>2016 Beijing node live-Chau Yee Cheung-Are Your V8 GC Logs Speaking to You?<br><a href="https://www.youtube.com/watch?v=ZWtvUxl6Pyo" target="_blank" rel="noopener">https://www.youtube.com/watch?v=ZWtvUxl6Pyo</a></li>
<li>垃圾回收的算法与实现<br><a href="http://library1.ga/_ads/2CCD392F898D2D1DFAD1271E01CF1CB0" target="_blank" rel="noopener">http://library1.ga/_ads/2CCD392F898D2D1DFAD1271E01CF1CB0</a></li>
<li>A tour of V8: Garbage Collection<br><a href="http://jayconrod.com/posts/55/a-tour-of-v8-garbage-collection" target="_blank" rel="noopener">http://jayconrod.com/posts/55/a-tour-of-v8-garbage-collection</a></li>
<li>Memory management in Blink<br><a href="https://chromium.googlesource.com/chromium/src/+/0e94f26e8/third_party/WebKit/Source/wtf/Allocator.md" target="_blank" rel="noopener">https://chromium.googlesource.com/chromium/src/+/0e94f26e8/third_party/WebKit/Source/wtf/Allocator.md</a></li>
<li>V8 —— 你需要知道的垃圾回收机制<br><a href="https://juejin.im/post/5b398981e51d455e2c33136b" target="_blank" rel="noopener">https://juejin.im/post/5b398981e51d455e2c33136b</a></li>
<li>解读 V8 GC Log（二）: 堆内外内存的划分与 GC 算法<br><a href="https://yq.aliyun.com/articles/592880?spm=a2c4e.11153959.0.0.abf75fbdaPONjd" target="_blank" rel="noopener">https://yq.aliyun.com/articles/592880?spm=a2c4e.11153959.0.0.abf75fbdaPONjd</a></li>
</ul>
<h2 id="2018-9-1-3"><a href="#2018-9-1-3" class="headerlink" title="2018-9-1-3"></a>2018-9-1-3</h2><ol>
<li>有点无聊，不想写日记了。</li>
<li>这两天在看其他phase，审相关的一个新洞，一个不错的攻击面，说不定有洞可以挖。</li>
<li>和我关系不错的一个同事今天离职了，有点小难过。</li>
<li>这两天在看了一点编译优化的算法。</li>
<li>想去蹭北大的课旁听，不知道值得不。<br><a href="https://xiongyingfei.github.io/SA/2017/main.htm" target="_blank" rel="noopener">https://xiongyingfei.github.io/SA/2017/main.htm</a></li>
<li>R大的回答依然很赞。。<br><a href="https://www.zhihu.com/question/28679215/answer/43883727" target="_blank" rel="noopener">https://www.zhihu.com/question/28679215/answer/43883727</a></li>
</ol>
<h2 id="2018-9-4-5"><a href="#2018-9-4-5" class="headerlink" title="2018-9-4-5"></a>2018-9-4-5</h2><ol>
<li>整理了一下v8的pipeline，重新调试分析了从bytecode-&gt;graph这么一个过程，然后把一个类型混淆导致的OOB写了一下分析。</li>
<li>看chakra的笔记，明月师傅太棒了。ORZ</li>
</ol>
<h2 id="2018-9-6-14"><a href="#2018-9-6-14" class="headerlink" title="2018-9-6-14"></a>2018-9-6-14</h2><ol>
<li>日记写的越来越少了，感觉慢慢习惯社畜生活√</li>
<li>做分享用的PPT，把v8 IR/GC等等写了一下，说来今天是v8 10周年来着……</li>
<li>收到录用电话，以后就是xlabのsakura。</li>
<li>写了两篇分析给导师，天天审代码ORZ。</li>
<li>对，我现在就是饿了在等夜宵（6:15)</li>
<li>这周真是摸鱼……不行不行……要振作！</li>
<li>以后要习惯早睡了，半夜突然心跳过速，4点多……去医院待到六点多降下来了，还好医生说除了心率快，其他的波形都正常……就是熬夜+焦虑吧。。<br>马上买了个小米手环……强制自己12点睡着，命重要命重要ORZ</li>
<li>录用函发下来了，等十月中旬谈薪资待遇，乖巧.jpg</li>
</ol>
<h2 id="2018-9-15-16"><a href="#2018-9-15-16" class="headerlink" title="2018-9-15-16"></a>2018-9-15-16</h2><ol>
<li>上周怠惰了一周，下周准备开始从能利用的漏洞开始看了，JIT算法什么的先放一边，然后给自己点高效的正反馈。</li>
</ol>
<h2 id="2018-9-17-21"><a href="#2018-9-17-21" class="headerlink" title="2018-9-17-21"></a>2018-9-17-21</h2><ol>
<li>这周看了几个能利用的漏洞，整理了一下exp写法，龚广那个oob read-&gt;任意地址读写的写法真的好6……，主要在对外发exp的就那么几个人，lokihardt，大宝，龚广，KK。</li>
<li>今天lw师傅分享了v8 UAF，绝赞，加上v8的wasm整理一下下一阶段的工作，继续学习。</li>
</ol>
<h2 id="2018-9-22"><a href="#2018-9-22" class="headerlink" title="2018-9-22"></a>2018-9-22</h2><ol>
<li>今天整理了一下接下来看什么，先把v8 oob和type confused的几种利用方法和primitive写了一下，ArrayBuffer的backing store这块涉及PartitionAlloc就不是很懂，学习看看。</li>
</ol>
<h2 id="2018-9-23-28"><a href="#2018-9-23-28" class="headerlink" title="2018-9-23-28"></a>2018-9-23-28</h2><ol>
<li>这周主要还是顺着JIT的洞看了一下，主要就是loki交的几个洞。<br>762874是lastIndexOf中Range Analysis出错，本来范围应该是(-1,maxlength)，但是它代码是写的是(-1,maxlength-1)，然后范围分析错了之后，通过简单构造，可以在优化的时候觉得索引始终在数组边界内，于是就在simplifed lowering里reduce掉了checkbounds。<br>但是在新版本v8里，它不会对checkbounds进行消除，加了一个flag，只能在终端启动的时候选择禁用，无法绕过。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  var i = &apos;A&apos;.repeat(2**28 - 16).indexOf(&quot;&quot;, 2**28);</span><br><span class="line">  i += 16; // real value: i = 2**28, optimizer: i = 2**28-1</span><br><span class="line">  i &gt;&gt;= 28; // real value i = 1, optimizer: i = 0</span><br><span class="line">  i *= 100000; // real value i = 100000, optimizer: i = 0</span><br><span class="line">  if (i &gt; 3) &#123;</span><br><span class="line">    return 0;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    var arr = [0.1, 0.2, 0.3, 0.4];</span><br><span class="line">    return arr[i];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>然后就把typer这块代码顺着大致看了看。</p>
<p>还调了一个之前异常里触发的callback，bugs:798644<br>然后在for-loop里改掉了array的类型，从DICTIONARY_ELEMENTS-&gt;HOLEY_ELEMENTS。<br>loki用了一个unshift来把dictionary重新compact，patch里是在for-loop里加了一个类型检查，然后在新版v8里unshift不再能重新compact了，这个特性也没了。<br>本质上其实还是一个prerequisite不满足引起的fastpath bug，但是loki能想到这么触发真的很厉害。</p>
<p>还有一个在InferReceiverMaps因为new.target被直接当成JSFunction处理，但是其实这里可以接收任何带有constructor的JSReceiver，于是就类型混淆了，之前看过，但是没写笔记，也没好好看这个洞能不能利用，就翻出来想调一下重新看一下。</p>
<p>最后是之前v8 6.9提到的dataview的新特性</p>
<p>Dataview在6.9版本做了比较大的更新</p>
<ul>
<li>runtime从c++迁移到CSA,用torque(一种用于生成CSA的DSL)重写</li>
<li>JSCall中进行builtin inline</li>
</ul>
<p>然后我主要是在审JSCall里对DataView的runtime inline的地方，刚开始看。<br>其他的就想了一些调试看代码的方法，后面我会总结一下写个文档。</p>
<h2 id="2018-9-29-10-8"><a href="#2018-9-29-10-8" class="headerlink" title="2018-9-29-10-8"></a>2018-9-29-10-8</h2><ol>
<li>最近主要就是在学漏洞利用，感觉不错，你看，整天搞分析的时候觉得想写利用，现在天天写利用又觉得还是想再做点分析，矛盾++</li>
<li>博客好久没更新了，文章全都更新在本地了。。不过有v8的问题欢迎一起讨论学习啦（给大佬递茶）。。QQ/Wechat在关于页面有……</li>
<li>慢慢习惯了现在的工作呢，每天想做就有一堆事情可以做，不想做可以什么都不做……</li>
</ol>
<h2 id="2018-10-9-10-27"><a href="#2018-10-9-10-27" class="headerlink" title="2018-10-9-10-27"></a>2018-10-9-10-27</h2><ol>
<li>整理一下最近学了什么，分析清楚了几个v8的JIT漏洞，暂时把v8的exp学习告一段落了，剩下的都不好写。</li>
<li>搞了一个无脑杂交的js fuzz，效果还行，出了几个OOM，出乎我的意料</li>
<li>漏洞会挖到的。</li>
</ol>
<h2 id="2018-10-28-10-29"><a href="#2018-10-28-10-29" class="headerlink" title="2018-10-28-10-29"></a>2018-10-28-10-29</h2><ol>
<li>整理了一下朋友给我的win kernel exploit资料，准备后面学习一下。<br>win kernel环境搭建<br><a href="https://bbs.pediy.com/thread-247019.htm" target="_blank" rel="noopener">https://bbs.pediy.com/thread-247019.htm</a><br>基础知识<br><a href="https://rootkits.xyz/blog/" target="_blank" rel="noopener">https://rootkits.xyz/blog/</a><br><a href="https://xiaodaozhi.com/" target="_blank" rel="noopener">https://xiaodaozhi.com/</a><br>顺便推一下他的博客。<br><a href="https://www.redog.me/" target="_blank" rel="noopener">https://www.redog.me/</a><br><a href="https://github.com/redogwu/windows_kernel_exploit" target="_blank" rel="noopener">https://github.com/redogwu/windows_kernel_exploit</a></li>
<li>顺便归档一下其他的资料<br>vm escape资料<br><a href="https://dangokyo.me/2018/03/02/go-for-vm-escape/" target="_blank" rel="noopener">https://dangokyo.me/2018/03/02/go-for-vm-escape/</a><br>IE漏洞资料<br><a href="https://github.com/wnagzihxa1n/BrowserSecurity/blob/master/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99.md" target="_blank" rel="noopener">https://github.com/wnagzihxa1n/BrowserSecurity/blob/master/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99.md</a></li>
<li>看了一下seccon2018的wp，艺术字那个题没找到wp，但是trick很多做不来，看了一道入门rop和kidvm；看了一下google ctf2018 Final，两道chrome的题目都不太会做，卒。</li>
<li>今天上午开了实验室大会，很有意思。</li>
<li>需要看一下wasm的东西了，blink to do，又是坑<br><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=826434" target="_blank" rel="noopener">https://bugs.chromium.org/p/chromium/issues/detail?id=826434</a><br><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=836141" target="_blank" rel="noopener">https://bugs.chromium.org/p/chromium/issues/detail?id=836141</a><br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1642" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1642</a></li>
<li>需要记录一下google ctf2018的一个有趣的challenge。<br>这个赛题应该是涉及两个知识点，一个是v8的range analysis和remove checkBounds<br>一个是浏览器里的浮点数是有精度极限的，合理构造能得到有趣的东西。<br><a href="https://gctf-2018.appspot.com/#challenges/pwn-just-in-time" target="_blank" rel="noopener">https://gctf-2018.appspot.com/#challenges/pwn-just-in-time</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER</a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">opt</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  x = <span class="number">0.1</span>;</span><br><span class="line">  x = x + <span class="number">2</span> + <span class="built_in">Number</span>.MAX_SAFE_INTEGER ;</span><br><span class="line">  <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">opt();</span><br><span class="line">b=opt();</span><br><span class="line">%OptimizeFunctionOnNextCall(opt);</span><br><span class="line">a = opt();</span><br><span class="line">print(b);</span><br><span class="line">print(a);</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"><span class="number">9007199254740994</span></span><br><span class="line"><span class="number">9007199254740992</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="2018-10-30-11-8"><a href="#2018-10-30-11-8" class="headerlink" title="2018-10-30-11-8"></a>2018-10-30-11-8</h2><ol>
<li>最近还是在主要花时间写利用和分析JIT上，理解checkbounds remove和checkmaps remove对我帮助很大。似乎能够建立起一套新的利用方式。</li>
<li>用gdb直接调试手机chrome真的是个大坑。</li>
</ol>
<h2 id="2018-11-9-11-10"><a href="#2018-11-9-11-10" class="headerlink" title="2018-11-9-11-10"></a>2018-11-9-11-10</h2><ol>
<li>看google ctf2018那道题，想完整的调一下chrome上的rce，小书包掏出IDA，现在的最大的问题是我需要逆向出math.cos这样的数学函数来帮我下断点，不然我写不了利用。<br>这可太难了。有没有大佬教教我~</li>
<li>（11-17日补充）：搞出来了，也没有很难，摊手。</li>
</ol>
<h2 id="2018-11-17"><a href="#2018-11-17" class="headerlink" title="2018-11-17"></a>2018-11-17</h2><p><img src="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-11-17-114730.jpg" alt=""><br><img src="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-11-17-115025.jpg" alt=""><br>今天是想说一下天府杯啦，xuanwu lab第二，lw师傅打了三个手机浏览器项目，很厉害，明年我也要打。<br>其实打手机浏览器我已经准备了很多了，起码一半以上的chrome v8能利用的漏洞，我都在linux上写了exp，剩下的事情并不复杂了，只要能调试和简单的逆向，然后适配手机就OK了。<br>很遗憾今年没有随队一起去，希望明年有机会吧。<br>所以其实呢平时多积累1day的exploit是很有意义的一件事情，到用到的时候就简单适配就好了。<br>以后我也会定期关注更新，每周写一个的。<br>让我感慨比较多的还是大宝，大宝太强了，他一个人可以搞定safari,chrome,edge三大浏览器（另外我认为他只是没有时间，而不是搞不动firefox），而且花了并不长的时间学习和搞定了ios的越狱。<br><img src="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/2018-11-17-120007.png" alt=""><br><a href="https://www.anquanke.com/post/id/149939" target="_blank" rel="noopener">https://www.anquanke.com/post/id/149939</a><br>顺手mark一下他当时的议题，虽然找不到PPT，mosec就是这点不好，完全不公开，只能找到这点资料了。</p>
<p>好了，回到自己，我现在在xuanwu lab做的并不是很好，挖v8的洞也挖不到，写利用也用不到我上，感觉自己的工作就是完全在自学，比较边缘化，但是大家都是这么过来的，总有需要我忙起来的时候，在那之前我只需要不断的积累积累和积累。<br>机会总会有的，其实现在就有很多，但是我觉得我还没有准备好，但是我会准备好的，不会特别晚，可能是这个月，可能是下个月或者下下个月，但是不需要很久。</p>
<p>其实在这里我想提一件好玩的事情，那就是，<strong>如果你不尝试，你永远不知道自己能做到哪一步。</strong><br>看过我日记的话应该知道，我其实只是从今年二三月份才开始调试CVE的，而且是先搞的内核的漏洞，而浏览器漏洞可能在面试之前只搞过两个周多些（可能更短，然后在实习之前又有很多其他杂七杂八的事情干扰了我，比如期末考试），在实习之前才花了些时间补充了一些基础知识，但我知道远远不够。<br>然后我面过了xuanwu lab的浏览器组，似乎也拿到了其他的offer（似乎），很感谢了，给什么都不会的我一个机会。<br><strong>旧事休提，我想说的是现在</strong><br>在实习的大概四个月里，我学会了如何去审计和分析，积累浏览器特性；<br>学习了如何写一个能跑起来的js fuzz；<br>学会了如何调试chrome，在PC上写一个完整的chrome exploit；<br>一些推特上的大佬给了我不少帮助，感觉大佬们真的是很平易近人了，还有其他朋友和我一起研究了不少东西，我觉得很开心。<br>我其实并没有特别特别的努力，在刚实习的时候还会加班到一点多，但是在现在已经很少了，偶尔加加班，大多数时候就是七八点下班回家玩手机。<br>不过我双休日都会在公司，毕竟没有女朋友233333，摸鱼为主，摸鱼为主2333333<br>嗯，我想说的是什么呢，比如说是在我入职之前，我其实是没有想过，我能这么快掌握chrome的漏洞利用的，<strong>其实这个并没有花我特别多的时间，但是在来xuanwu lab之前我从未开始过这件事情。没有开始就不知道自己能做到哪一步。</strong></p>
<p>再比如说我的小徒弟，他在今年大概9月之前，还是在win xp这种古老系统上学习win kernel的，但是在现在已经可以熟练的在win10 rs4上写利用了，并且做了非常多的笔记和程序，还做了不少补丁分析来搞定没有poc的漏洞的。<br>他现在基本能够搞定大部分win kernel漏洞在win10上的利用了，这是超出我预期的一件事情。<br>在这段时间里，他经常工作到三四点钟，我觉得这很nice，得到什么总要付出代价，趁年轻还能付出代价的时候不付出，要等到什么时候。<br>我们这个行业发展是很快的，要跟上前面的人的进度，就必须跑起来，飞快的跑起来。<br><strong>但是光是利用其实远远不够，这种没有poc，只有补丁的win kernel漏洞，起码要自己一步一步去分析个几十个才能初见成果。这后面要补充的，是茫茫多的windows internals知识</strong></p>
<p>后面的打算是，和大宝说的差不多，一是仔细审计和分析学习历史漏洞，找找how to bypass patch的点，二是好好学习一下其他浏览器上的JIT，比如edge比如jsc，重点学习大宝和loki的洞，寻找更多的启发性的点。<br>积累下去，我会变得更好的，我确定。</p>
<h2 id="2018-11-19"><a href="#2018-11-19" class="headerlink" title="2018-11-19"></a>2018-11-19</h2><ol>
<li>今天在翻jsc的漏洞exploit，认识了一个越狱大佬，和大佬交流了一下，然后学会了怎么单独编译jsc和怎么找patch。<br>后面预备写一个jsc漏洞利用系列，todo it。</li>
<li><a href="https://www.w3.org/TR/wasm-js-api-1/" target="_blank" rel="noopener">https://www.w3.org/TR/wasm-js-api-1/</a><br>今天在翻wasm的文档，调试分析<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=766253，看partitionAllocation的头秃，d8还调不了，配了一下windbg的调试环境，搞了一下符号和断点，然而，然而，chrome" target="_blank" rel="noopener">https://bugs.chromium.org/p/chromium/issues/detail?id=766253，看partitionAllocation的头秃，d8还调不了，配了一下windbg的调试环境，搞了一下符号和断点，然而，然而，chrome</a> 60.x的离线包我去哪找。。。气哭。。难道要编译？？？</li>
<li>感觉有锅（项目），但是估计不是我背锅，继续干活。。困死我了。</li>
<li>终于找到了，可以写exp了。</li>
</ol>
<h2 id="2018-11-22"><a href="#2018-11-22" class="headerlink" title="2018-11-22"></a>2018-11-22</h2><ol>
<li>这周前两天配调试环境+去医院。</li>
<li>后两天分析root cause+去医院，倒是找到了root cause和它可能产生的影响，但是到了在partitionAlloc堆上调试exp，又懵了……<br>感觉在做一道非常难的pwn题。。没有很弱智的别人总结好的bypass方法，还没有pwndbg这么方便的东西打印堆结构。<br><a href="https://github.com/msmania/chromium-debug/issues/1#issuecomment-439944967" target="_blank" rel="noopener">https://github.com/msmania/chromium-debug/issues/1#issuecomment-439944967</a><br>感谢这个大佬，但是我的chrome 60.x并不能用。。ORZ<br>头疼，难道要靠猜。。</li>
</ol>
<h2 id="2018-11-23"><a href="#2018-11-23" class="headerlink" title="2018-11-23"></a>2018-11-23</h2><ol>
<li><p>先说结论<a href="https://cs.chromium.org/chromium/src/base/allocator/partition_allocator/partition_freelist_entry.h?g=0&amp;l=23" target="_blank" rel="noopener">https://cs.chromium.org/chromium/src/base/allocator/partition_allocator/partition_freelist_entry.h?g=0&amp;l=23</a><br>猜我已经全猜出来了，后面整理文档。漏洞很有意思。</p>
</li>
<li><p>这个漏洞的root cause就是在一个wasm实例化<code>InstanceBuilder::InstanceBuilder</code>的时候<br>因为触发了一次回调。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int InstanceBuilder::ProcessImports(Handle&lt;FixedArray&gt; code_table,</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">      MaybeHandle&lt;Object&gt; result =</span><br><span class="line">        module_-&gt;is_asm_js() ? LookupImportAsm(index, import_name)</span><br><span class="line">                             : LookupImport(index, module_name, import_name);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>于是又进行了一次wasm2的实例化，因为wasm的实例化里有这么一个判断。<br>它会先把已有的compiled_module对象拿来用，首先检查它有没有owner，如果有了就克隆一份。<br>因为我们是在还没有设置owner之前就触发了回调再次实例化，于是两个wasm对象的compiled_module是一样的。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Handle&lt;WasmCompiledModule&gt; original;</span><br><span class="line">    &#123;</span><br><span class="line">      DisallowHeapAllocation no_gc;</span><br><span class="line">      original = handle(module_object_-&gt;compiled_module());</span><br><span class="line">      <span class="keyword">if</span> (original-&gt;has_weak_owning_instance()) &#123;</span><br><span class="line">        owner = handle(WasmInstanceObject::cast(</span><br><span class="line">            original-&gt;weak_owning_instance()-&gt;value()));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">if</span> (original-&gt;has_weak_owning_instance()) &#123;</span><br><span class="line">      <span class="comment">// Clone, but don't insert yet the clone in the instances chain.</span></span><br><span class="line">      <span class="comment">// We do that last. Since we are holding on to the owner instance,</span></span><br><span class="line">      <span class="comment">// the owner + original state used for cloning and patching</span></span><br><span class="line">      <span class="comment">// won't be mutated by possible finalizer runs.</span></span><br><span class="line">      DCHECK(!owner.is_null());</span><br><span class="line">      ...</span><br><span class="line">      TRACE(<span class="string">"Cloning from %d\n"</span>, original-&gt;instance_id());</span><br></pre></td></tr></table></figure></p>
<p>在后面grow掉wasm2的buffer的时候，会将两个instance的wasm_memory_reference都改掉。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> RelocInfo::update_wasm_memory_reference(</span><br><span class="line">    Isolate* isolate, Address old_base, Address new_base,</span><br><span class="line">    ICacheFlushMode icache_flush_mode) &#123;</span><br><span class="line"><span class="comment">//  DCHECK(IsWasmMemoryReference(rmode_));</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"new_base is :%p\n"</span>,new_base);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"old_base is :%p\n"</span>,old_base);</span><br><span class="line">  Address updated_reference = new_base + (wasm_memory_reference() - old_base);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"updated_reference is:%p\n"</span>,updated_reference);</span><br><span class="line">  <span class="comment">// The reference is not checked here but at runtime. Validity of references</span></span><br><span class="line">  <span class="comment">// may change over time.</span></span><br><span class="line">  set_embedded_address(isolate, updated_reference, icache_flush_mode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>具体的还要再看看，剩下主要还是在看partitionAlloc，<br>利用基本上是搞明白了，一些细节的东西还是要整理一下。</p>
<ol>
<li>组会被问chrome sandbox escape，啥都不会的我。。太菜了ORZ</li>
<li>这周基本上就是在调试wasm的漏洞，和实现一个arraybuffer oob r/w的exp吧，后者geohot在2014年就搞过了23333.</li>
</ol>
<h2 id="2018-11-27"><a href="#2018-11-27" class="headerlink" title="2018-11-27"></a>2018-11-27</h2><ol>
<li>这一周基本上都在医院辗转度过……心率过速什么的。。应该不是器质性的问题，考虑是植物神经紊乱吧。<br>摸鱼休息，调整饮食和作息，锻炼身体，不知不觉已经老了ORZ。<br>说到底。。经常凌晨三四点睡觉还不吃早饭。。能苟活到现在我也太幸运了。。</li>
<li>可惜了realworld ctf，估计是不能去了，这段时间还是养病重要，尽量不操劳了，另外吃的太好了。。血脂也开始有点偏高（虽然还在正常的范围内）。。要吃清淡了。。趴桌</li>
<li>把partitionAlloc大概看了看，基本没问题了，利用也基本写完了，不过在任意地址读写的原语之后，如何得到一个完整的exp，还要商榷一下，windbg很厉害。。’dx -r1 isolate’<br>cheat engine也很厉害……<br>不过说来调的时候发现了很多有意思的东西，可以顺手再逆一下chrome了。<br>另外在看之前的东西的时候，发现typedArray的elements里原来就有存arraybuffer的backingstore，越界直接写这里就行了。。</li>
<li>准备看下天府杯的那个洞了，基本上定位到了patch，这两天调一下看看。</li>
<li>试图编译chrome apk，然后用来恢复符号，看看能不能在国产手机浏览器上找到点有用的调试符号。这个真的是很头疼呀，也不太好意思问同事，趴桌。</li>
</ol>
<h2 id="2018-11-30"><a href="#2018-11-30" class="headerlink" title="2018-11-30"></a>2018-11-30</h2><ol>
<li>一周结束了，整理一下这周，最近十点睡八点起，过得很有规律，也挺好的，身体也在康复中，很遗憾realworld ctf不能去了，多休息吧。</li>
<li>在<strong>最新版chrome上面写了exp</strong>，简单的栈劫持+mprotect弹计算器，挺开心的，最近可能写笔记吧，放不放看情况了。</li>
<li>说来大概从开始写利用也搞了两个月了，稍微有点进度感人，但是总算还是搞的差不多了，对GC管理还要再熟悉，不过很开心了。</li>
<li>接下来主要看看chrome sandbox escape fuzz，然后loki最近在挖jsc的漏洞，这个也值得好好学习一下。</li>
<li>最近似乎经常有人问我二进制怎么入门……之前看过一个杨博士以前说的，手写一个cpu，手写一个内核，手写一个编译器，然后我觉得最好再手写一个STL库。然后就入门了。。别和我说汇编……我现在都读不懂汇编了。。</li>
</ol>
<h2 id="2018-12-3"><a href="#2018-12-3" class="headerlink" title="2018-12-3"></a>2018-12-3</h2><ol>
<li>扁桃体发炎的我完美错过realworld ctf，熬夜熬的ORZ<br>看了看rw的赛题，safari jsc那道题基本上就是抄的saelo p2o2018的漏洞造的洞，clobeerWorld代表删除之前做出的任何关于类型信息的假设,然后长亭造的这个洞把它删掉了，即假定在for-in循环中检索对象的property是没有副作用的，感觉比v8里好懂多了…<br>exp如果不是因为最近的那个缓解机制的话，应该复制粘贴就能写了。。23333</li>
<li>病了两周的我今天在补笔记，很多细节忘干净了。ORZ</li>
</ol>
<h2 id="2018-12-4"><a href="#2018-12-4" class="headerlink" title="2018-12-4"></a>2018-12-4</h2><ol>
<li>今天因为学校要交材料回去补第七学期外出实习的证明，置换学分。所以感慨一下，自己的人生好像在走钢丝，一不小心就GG了<br>熟悉我的人可能知道，我学校很一般23333<br>我的小伙伴也觉得：没有强大的背景和资源倒不一定意味着没有前途，只是容错率低得多罢了，在别人探索人生享受诗和远方的时候就不得不找准一条路走到黑，一个环节出了问题，就GG了<br>为什么同样是这个行业，有的人就不会焦虑，因为差距呀。</li>
<li>然后一件开心的事情是，我导师今天终于和我聊了一下，我还以为我被忘了23333，总之工作还是被肯定了，继续努力就是了。<br>没什么可以选择的，就算掉下去了，我能做的，也只有让自己不要摔的太惨而已。</li>
<li>补了cve-2017-15401的笔记，完全是windbg和cheatengine写出来的exp可还行（滑稽</li>
</ol>
<h2 id="2018-12-5"><a href="#2018-12-5" class="headerlink" title="2018-12-5"></a>2018-12-5</h2><ol>
<li>龚神的洞看不懂，根本看不懂，我飘了，我怎么会觉得我能看懂这种漏洞。。</li>
<li>最近在一种思路出了好几个洞，也是厉害，在我觉得没东西看的时候，突然爆炸。。</li>
</ol>
<h2 id="2018-12-9"><a href="#2018-12-9" class="headerlink" title="2018-12-9"></a>2018-12-9</h2><ol>
<li>最近仔细看了看，龚神的洞是worker的序列化和反序列化的问题，这个点从来也没去看过，感觉大家估计也不懂这个东西该怎么用，还是很神奇的一件事情。</li>
<li>最近对逻辑漏洞十分感兴趣，得益于同事花了两天挖到了一个windows的提权0day，再次感觉到我都是在和一群什么天才黑客共事2333</li>
<li>sqlite的漏洞，可以拿来打Chrome，之前看过一点相关的东西<br><a href="https://worthdoingbadly.com/sqlitebug/" target="_blank" rel="noopener">https://worthdoingbadly.com/sqlitebug/</a></li>
</ol>
<h2 id="2018-12-10-17"><a href="#2018-12-10-17" class="headerlink" title="2018-12-10-17"></a>2018-12-10-17</h2><ol>
<li>最近就一直在解决1710的exp的问题，解决不了，陷入自闭。。<br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1710" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1710</a></li>
<li>今天休息一下看看safari 0.5day。<br><a href="http://phrack.org/papers/attacking_javascript_engines.html" target="_blank" rel="noopener">http://phrack.org/papers/attacking_javascript_engines.html</a><br><a href="https://github.com/niklasb/sploits/blob/master/safari/regexp-uxss.html" target="_blank" rel="noopener">https://github.com/niklasb/sploits/blob/master/safari/regexp-uxss.html</a></li>
</ol>
<h2 id="2018-12-17-26"><a href="#2018-12-17-26" class="headerlink" title="2018-12-17-26"></a>2018-12-17-26</h2><ol>
<li>最近一直在摸鱼，群星真好玩.jpg，然后在找方向，一直以来靠分析漏洞和写利用来续了一波命，但是还是没搞懂该怎么挖洞，也没人能告诉我chrome v8的洞怎么挖，论编程的能力，这两年在学校靠自己真的没锻炼出啥来，突然开始意识到自己基础薄弱什么都不会了。<br>别人在学校的时候，就通过上课+实验的方式打了很好的基础，而我……感觉一路走来都是自己一个人xjb搞，偶尔和师傅们交流一下，方向上感觉没什么大的问题，就是真的，嗯，我太弱了。希望大家不要犯这种错误了，但是要是再来一次的话，我还是会选择先进实验室再说。</li>
<li>操作系统基础学习资料，顺便安利CSAPP<br><a href="https://nju-ics.gitbooks.io/ics2016-programming-assignment/content/" target="_blank" rel="noopener">https://nju-ics.gitbooks.io/ics2016-programming-assignment/content/</a><br><a href="https://github.com/Changochen/nju-pa" target="_blank" rel="noopener">https://github.com/Changochen/nju-pa</a></li>
<li>逻辑漏洞学习，顺便安利James Forshaw，一直想学也一直没学，就先todo list了<br><a href="https://conference.hitb.org/hitbsecconf2017ams/materials/D2T3%20-%20James%20Forshaw%20-%20Introduction%20to%20Logical%20Privilege%20Escalation%20on%20Windows.pdf" target="_blank" rel="noopener">https://conference.hitb.org/hitbsecconf2017ams/materials/D2T3%20-%20James%20Forshaw%20-%20Introduction%20to%20Logical%20Privilege%20Escalation%20on%20Windows.pdf</a></li>
<li>工控协议Fuzz的一个比较有趣的资料？<br><a href="https://mp.weixin.qq.com/s/QcGd746CkQVIxx847Zp8Jg" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/QcGd746CkQVIxx847Zp8Jg</a></li>
<li>想学fuzz，等35C3 talk的PPT。</li>
</ol>
<h2 id="2018-12-27-31"><a href="#2018-12-27-31" class="headerlink" title="2018-12-27-31"></a>2018-12-27-31</h2><ol>
<li>35c3 video和日程整理<br><a href="https://media.ccc.de" target="_blank" rel="noopener">https://media.ccc.de</a><br><a href="https://fahrplan.events.ccc.de/congress/2018/Fahrplan/schedule/3.html" target="_blank" rel="noopener">https://fahrplan.events.ccc.de/congress/2018/Fahrplan/schedule/3.html</a></li>
<li><p>开始fuzz之旅<br>From Zero to Zero Day-Jonathan Jacobi<br><a href="https://www.youtube.com/watch?v=xp1YDOtWohw" target="_blank" rel="noopener">https://www.youtube.com/watch?v=xp1YDOtWohw</a><br>Attacking Chrome IPC-nedwill<br><a href="https://www.youtube.com/watch?v=39yPeiY808w" target="_blank" rel="noopener">https://www.youtube.com/watch?v=39yPeiY808w</a><br>The Layman’s Guide to Zero-Day Engineering<br><a href="https://www.youtube.com/watch?v=WbuGMs2OcbE" target="_blank" rel="noopener">https://www.youtube.com/watch?v=WbuGMs2OcbE</a></p>
</li>
<li><p>简述一下From Zero to Zero Day里我觉得有趣的东西</p>
<ul>
<li>基础很重要，其中最重要的就是c/c++/os(或者你具体研究的那个系统，比如浏览器)internal/能用python或者其他语言coding来实现自己的想法。<br>最后一点我觉得<a href="https://ktkitty.github.io/" target="_blank" rel="noopener">KT</a>师傅搞的非常棒，可惜我太菜了。</li>
<li>通过CTF或者具体的简单的小软件来学习关于漏洞的基础知识，不要害怕失败，从其他人的解法中你依然能学到非常多的东西，这里建议follow defcon预选赛和defcon的赛题，其他的可以不做，没有什么意义。<br>推荐一个系列教程<br><a href="http://liveoverflow.com/capture_the_flag/index.html" target="_blank" rel="noopener">http://liveoverflow.com/capture_the_flag/index.html</a><br><a href="https://www.youtube.com/channel/UClcE-kVhqyiHCcjYwcpfj9w" target="_blank" rel="noopener">https://www.youtube.com/channel/UClcE-kVhqyiHCcjYwcpfj9w</a><br>但是要注意，不要在“浅水区”待太久，你只要确保自己有继续进行研究的能力即可，我觉得半年可以完成这些事情，然后继续往下。</li>
<li>接下来需要的就是eat sleep pwn,repeat;2333<br>这里的建议是，当你掌握了一些trick和思路之后，你可以尝试去理解真实的漏洞，理解其中的pattern<br>比如你可以去看google project zero提交的漏洞，并研究他们。</li>
<li>后面的部分是一个有趣的漏洞和它的exp，不过这部分其实有点无聊。</li>
</ul>
</li>
</ol>
<p>我似乎懂了些什么有趣的东西，从jsc开始实践。why not v8?it’s difficult…）</p>
<ol>
<li>继续简述一下Attacking Chrome IPC里的一些我觉得关键的地方<ul>
<li>练习代码审计<ol>
<li>拿到一个已经存在的漏洞报告</li>
<li>知道漏洞大概发生在什么地方，或者是什么模块，不要去看完整的漏洞描述，尝试去发现漏洞。</li>
<li>如果你失败了，看一下漏洞报告，并且去总结你错过了什么地方。</li>
<li>重复这个过程，直到你觉得OK为止。</li>
</ol>
</li>
<li>练习fuzz<ol>
<li>请确定自己有充分的审计上的练习</li>
<li>拿到一个漏洞，通过自己写fuzz去trigger它。</li>
</ol>
</li>
<li>protobuf-mutator+libfuzzer</li>
</ul>
</li>
</ol>
<p>年终的最后几天，是一边睡觉一边和这些有趣的talk度过的，还看了35c3的v8题目，有一个逃逸分析的点想了半个月没想到，是我蠢了。<br>有趣的挑战，明年要继续努力了，夯实基础，砥砺前行。<br>一个人久了真的很累呀，新的一年，找个朋友一起住，一起打打游戏，搞搞研究，开开心~熬过这半年就好了。</p>
<h2 id="2019-1-1-2"><a href="#2019-1-1-2" class="headerlink" title="2019-1-1-2"></a>2019-1-1-2</h2><ol>
<li>写一个能跑的js fuzz，然后慢慢调。<br>lighthouse+lcov–&gt;feedback<br>dharma–&gt;语法生成<br>将两部分结合一下就是一个能跑的js fuzz，写代码真麻烦2333<br>今天大概看了看dharma的语法描述文件怎么写，想想要写一堆语法描述就麻烦。。</li>
<li>youtube上看到一个小系列The Art of Fuzzing，upx是真的很好fuzz。。很快一堆crash<br>然后是google的libfuzzerTutorial很有趣。<br><a href="https://github.com/google/fuzzer-test-suite/blob/master/tutorial/libFuzzerTutorial.md" target="_blank" rel="noopener">https://github.com/google/fuzzer-test-suite/blob/master/tutorial/libFuzzerTutorial.md</a></li>
<li>所以今天大概最后就是再看了一下webkid。</li>
</ol>
<h2 id="2019-1-3-9"><a href="#2019-1-3-9" class="headerlink" title="2019-1-3-9"></a>2019-1-3-9</h2><ol>
<li>研究safari jsc<br>safari JIT exploit<br><a href="https://www.youtube.com/watch?v=bqehb-YZ9jo" target="_blank" rel="noopener">https://www.youtube.com/watch?v=bqehb-YZ9jo</a><br><a href="https://share.weiyun.com/5IJZPBp" target="_blank" rel="noopener">https://share.weiyun.com/5IJZPBp</a><br>fuzz book<br><a href="https://www.fuzzingbook.org" target="_blank" rel="noopener">https://www.fuzzingbook.org</a><br>pizlo jsc<br><a href="http://www.filpizlo.com/slides/pizlo-splash2018-jsc-compiler-slides.pdf" target="_blank" rel="noopener">http://www.filpizlo.com/slides/pizlo-splash2018-jsc-compiler-slides.pdf</a><br><a href="http://www.filpizlo.com/" target="_blank" rel="noopener">http://www.filpizlo.com/</a><br>其他乱七八糟的paper<br><a href="https://llvm.org/devmtg/2014-10/Slides/Trick-FTL.pdf" target="_blank" rel="noopener">https://llvm.org/devmtg/2014-10/Slides/Trick-FTL.pdf</a><br>Array Bounds Check Elimination for the Java HotSpotTM Client Compiler<br><a href="http://www.ssw.uni-linz.ac.at/Research/Papers/Wuerthinger07/Wuerthinger07.pdf" target="_blank" rel="noopener">http://www.ssw.uni-linz.ac.at/Research/Papers/Wuerthinger07/Wuerthinger07.pdf</a></li>
</ol>
<h2 id="2019-1-12"><a href="#2019-1-12" class="headerlink" title="2019-1-12"></a>2019-1-12</h2><ol>
<li>研究编译原理<br><a href="https://www.bilibili.com/video/av17669734/?p=77" target="_blank" rel="noopener">https://www.bilibili.com/video/av17669734/?p=77</a><br>刷完视频刷书，重新看感觉有新收获，得到的认知就是：</li>
</ol>
<ul>
<li>要知道你看的这个东西是用来做什么的，解决什么问题的</li>
<li>它具体可能是怎么实现的，js引擎里是怎么实现的</li>
<li>modern compiler和书里的不同之处</li>
</ul>
<h2 id="2019-4-2"><a href="#2019-4-2" class="headerlink" title="2019-4-2"></a>2019-4-2</h2><p>不写日记感觉不能梳理自己每天在干嘛，就写一下好了。</p>
<ol>
<li>saelo的两个spiderMonkey漏洞<br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1791" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1791</a><br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1810" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1810</a></li>
</ol>
<p>A NativeObject is basically:</p>
<ul>
<li>An ObjectGroup [3] which stores things like the prototype and type information for properties (see below)</li>
<li>The Shape [4] of the object which indicates the location of properties. A Shape could e.g. tell that property .p is stored in the 2nd property slot</li>
<li>Property storage [5]: a dynamically sized array in which the property values are stored. The Shapes provide indices into this array</li>
<li>Element storage [6]: a dynamically sized array in which elements (properties with an integer key) are stored</li>
</ul>
<ol>
<li>saelo的jsc漏洞<br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1753" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1753</a><br>关于ArrayWithSlowPutStorage<br>JavaScriptCore has a notion of “having a bad time” (JSGlobalObject::haveABadTime). This is the case when an object in the array prototype chain has indexed accessors. In that case, the indexing mode of all arrays is switched to ArrayWithSlowPutStorage, which indicates that element stores to holes have to consult the prototype chain. The engine will “have a bad time” as soon as an object in the default prototype chain of Arrays has an indexed accessor.<br>关于watchpoint<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Example:</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * var o = [1.1, 2.2, 3.3, 4.4];</span></span><br><span class="line"><span class="comment"> * // o is now an object with structure ID 122.</span></span><br><span class="line"><span class="comment"> * o.property = 42;</span></span><br><span class="line"><span class="comment"> * // o is now an object with structure ID 123. The structure is a leaf (has never transitioned)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * function helper() &#123;</span></span><br><span class="line"><span class="comment"> *     return o[0];</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> * jitCompile(helper);</span></span><br><span class="line"><span class="comment"> * // In this case, the JIT compiler will choose to use a watchpoint instead of runtime checks</span></span><br><span class="line"><span class="comment"> * // when compiling the helper function. As such, it watches structure 123 for transitions.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * delete o.property;</span></span><br><span class="line"><span class="comment"> * // o now "went back" to structure ID 122. The watchpoint was not fired.</span></span><br><span class="line"><span class="comment"> * o[0] = &#123;&#125;;</span></span><br><span class="line"><span class="comment"> * // o now transitioned from structure ID 122 to structure ID 124 (due to the array mode change).</span></span><br><span class="line"><span class="comment"> * // The watchpoint still didn't fire.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * return helper();         // type confusion -&gt; addrof</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>Roughly the rule of thumb is that CheckStructure will be used for arguments and Watchpoints will be used for objects referenced from outer scopes that “appear” to be constants (e.g. have never been reassigned). </p>
<p>JavaScriptCore可以使用inferred type mechanism跟踪properties的类型。<br>第一次创建property时， inferred type for the property被分配并link到structure。inferred type基于property的初始值。<br>例如：第一次使用值42设置property.x会将.x的inferred type初始化为“Int32”。如果为同一property（在引用它的任何Object上）分配了一个新值，则该property的inferred type将“wide”以包括所有先前类型和新类型。<br>例如：如果稍后将double值存储在property.x中，则该property的新inferred type将为“Number”。<br>有关确切规则，请参阅InferredType::Descriptor::merge。除了primitive types和”Object”之外,inferred types也可以是“ObjectWithStructure”,在这种情况下，该property被称为具有特定structure的对象。<br>DFG和FTL JIT编译器使用inferred type来省略类型检查。请考虑以下代码：<br>function foo(o) {<br>    return o.a.b;<br>}<br>假设.a property的inferred type是ObjectWithStructure，那么编译器能够使用inferred type省略o.a的StructureCheck，因此只会对o设置StructureCheck。<br>watchpoints的存在使得inferred type mechanism十分安全，如果JIT编译的代码依赖于inferred type，就会设置一个Callback(被称作Watchpoint)在inferred type上，一旦它被wide就会触发callback，于是就会废弃之前JIT编译的代码。<br>Code that updates a property value is then required to check whether the inferred type is still consistent with the new value and if not widen it and trigger Watchpoints. This is done e.g.in Structure::willStoreValueForExistingTransition.<br>因此，每个”direct”的property store都可能是安全bug，因为它可能violate inferred types.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void putDirect(VM&amp; vm, PropertyOffset offset, JSValue value) &#123; locationForOffset(offset)-&gt;set(vm, this, value); &#125;</span><br></pre></td></tr></table></figure></p>
<p>看不懂<br>todo</p>
<p><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1775" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1775</a><br>神奇的循环不变量外提，没有特别需要分析的，看IR<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Loop header</span><br><span class="line">len = LoadArrayLength v8</span><br><span class="line"><span class="comment">// Do other loop header stuff</span></span><br><span class="line"></span><br><span class="line"># Loop body</span><br><span class="line">CheckStructure v8, expected_structure_id</span><br><span class="line">StoreProperty v8, <span class="string">'a'</span>, <span class="number">42</span></span><br><span class="line">CheckBounds <span class="number">-698666199</span>, len             <span class="comment">// Bails out if index is OOB (always in this case...)</span></span><br><span class="line">GetByVal v8, <span class="number">-698666199</span>                 <span class="comment">// Loads the element from the backing storage without performing additional checks</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Jump back to beginning of loop</span></span><br></pre></td></tr></table></figure></p>
<p>-&gt;<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">StructureCheck v8, expected_structure_id</span><br><span class="line">GetByVal v8, <span class="number">-698666199</span></span><br><span class="line"></span><br><span class="line"># Loop header</span><br><span class="line">len = LoadArrayLength v8</span><br><span class="line"><span class="comment">// Do other loop header stuff</span></span><br><span class="line"></span><br><span class="line"># Loop body</span><br><span class="line">StoreProperty v8, <span class="string">'a'</span>, <span class="number">42</span></span><br><span class="line">CheckBounds <span class="number">-698666199</span>, len</span><br><span class="line"></span><br><span class="line"><span class="comment">// Jump back to beginning of loop</span></span><br></pre></td></tr></table></figure></p>
<p>Hoisting of GetByVal will only happen if safeToExecute (from DFGSafeToExecute.h) returns true. This function appears to only be concerned about type checks, so in this case it concludes that the GetByVal can be moved in front of the loop header as the StructureCheck (performing the type check) is also moved there. This seems to be the reason that the property store (v8.a = 42) is required as it forces a CheckStructure node which would otherwise be missing.</p>
<h2 id="2019-4-24"><a href="#2019-4-24" class="headerlink" title="2019-4-24"></a>2019-4-24</h2><ol>
<li>在漫长的时间里无所作为，开始反省自己遇到的瓶颈到底是什么，除了chakra，其他浏览器的JIT优化漏洞总是越来越少了。<br>首先是在我花了很长时间的浏览器JIT优化方面，已经很久没有chrome v8的有趣漏洞出现了，我分析了龚广天府cup的漏洞，以及最近的那个FileReader的漏洞，有趣的是，它们的漏洞pattern都是，在处理超长的数据或者其他东西的时候，没有处理好，导致畸形数据或者错误的程序执行逻辑产生，但是并不太好迅速的针对进行审计。<br>我依然更感兴趣在优化漏洞上，尤其是大宝发现的那些chakra漏洞，非常有趣，但是v8里没有chakra那些奇奇怪怪的设计。</li>
<li>fuzz依然是我更感兴趣的方向，但是单纯js fuzz已经没什么前途了。。<br>和Atum这样的顶级二进制选手聊过之后，感觉自己在更多的软件实现，尤其是内核的一些东西上的欠缺，要更理解这些系统机制以及如何操纵它们才可以。<br><a href="https://github.com/A7um/syscallhook" target="_blank" rel="noopener">https://github.com/A7um/syscallhook</a><br>强的令人发指。。<br>通过顶级CTF来迭代知识依然是一个好的选择，抛弃掉无用的heap相关的赛题，剩下的题目质量依然很高很好，值得学习，尤其是c3 ctf。</li>
<li>挖了这么久漏洞，终于明白了，攻击面和结合攻击面去fuzz，是最合适的挖洞方法，剩下就是code smell。</li>
<li>我觉得逻辑漏洞是一个很有趣的方向，不知道有没有大佬带我玩，逆向一些国产小软件的进程间通信来找找漏洞啥的。</li>
</ol>
<h2 id="2019-4-25"><a href="#2019-4-25" class="headerlink" title="2019-4-25"></a>2019-4-25</h2><p>最近分析的比较有趣的浏览器漏洞。<br>Issue 1793: Chrome: Integer overflow in NewFixedDoubleArray<br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1793" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1793</a><br>CVE-2019-5786 FileReader UaF<br>OOB Write in ValueDeserializer::ReadDenseJSArray (Tian Fu Cup）<br><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=905940" target="_blank" rel="noopener">https://bugs.chromium.org/p/chromium/issues/detail?id=905940</a><br><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=906313" target="_blank" rel="noopener">https://bugs.chromium.org/p/chromium/issues/detail?id=906313</a><br><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=914731" target="_blank" rel="noopener">https://bugs.chromium.org/p/chromium/issues/detail?id=914731</a><br>现在看这些漏洞，有一些有趣的code smell了。浏览器对我来说慢慢的也已经变成了一个看得懂的东西呢，不过离挖到洞还早。</p>
<h2 id="2019-6-5"><a href="#2019-6-5" class="headerlink" title="2019-6-5"></a>2019-6-5</h2><p>我的CVE。</p>
<ol>
<li><a href="https://chromereleases.googleblog.com/2019/06/stable-channel-update-for-desktop.html" target="_blank" rel="noopener">https://chromereleases.googleblog.com/2019/06/stable-channel-update-for-desktop.html</a><br>[$TBD][950328] Medium CVE-2019-5831: Incorrect map processing in V8. Reported by yngwei(JiaWei, Yin) of IIE Varas and <strong>sakura of Tecent Xuanwu Lab</strong> on 2019-04-07</li>
<li><a href="https://support.apple.com/en-us/HT210123" target="_blank" rel="noopener">https://support.apple.com/en-us/HT210123</a><br>CVE-2019-8583: <strong>sakura of Tencent Xuanwu Lab</strong>, and dwfault working at ADLab of Venustech<br>从开始搞浏览器到现在，差不多就是一年，去掉一些零零碎碎的做其他事情的时间，可能大概半年多一些，我也有自己的google和apple致谢了。<br>刚刚好在我毕业答辩期间收到编号，可能是我的毕业礼物了，thanks~哈哈<br>既然发了日记就说一下我的理解，在实习的这一年里认识了非常多的大佬，我在xuanwu lab的导师sky还有lw和明月师傅他们，r3kapig的Ne0和Atum他们，还有和我一起讨论学习的yngwei和dwfault,jessica他们，都给了我非常多的帮助和启发。<br>在推特上面也认识了不少的朋友，以及follow了很多大佬，尤其是project zero的saelo，跟进最新的漏洞并分析，研究漏洞挖掘的新技术新手法，不断提升自己。<br>所以学习这件事情，最重要的就是开阔视野，你以为的有用的东西并不真的有用，实际的漏洞挖掘考察的是对目标的理解和深度，并不是说和简单的CTF pwn一样，只是hack game，ctf非常有意义，但是也要认识到这一点，真正决定你能不能挖到漏洞的，永远是对目标软件的理解，并没有什么特别特别通用的知识。<br>Just spend a long time learning and doing it, you will get better.</li>
</ol>
<h2 id="2019-6-6"><a href="#2019-6-6" class="headerlink" title="2019-6-6"></a>2019-6-6</h2><p>最近这几天一直在想漫长的一个月做点什么，嗯，没错，我毕业了，毕业答辩结束，应该没什么幺蛾子的话，会顺利的会玄武上班。<br>然后就有点迷茫，暂时，嗯，暂时不太想继续肝JS engine了，花了太久，产出有限，希望做些有趣的事情，嗯，当然fuzz还会继续跑。<br>想学的东西有点多，我是出于兴趣在搞技术的，有些复杂的东西其实不太想牵扯到其中，我喜欢挖到漏洞，喜欢和厉害的人交流技术弥补不足，还喜欢在推特上被夸，嗯。<br>还想学更多有趣的东西。</p>
<h2 id="2019-6-23"><a href="#2019-6-23" class="headerlink" title="2019-6-23"></a>2019-6-23</h2><ol>
<li>拿到了毕业证和学位证，准备入职了，列一下计划。</li>
<li>和@aSiagaming一起解决gctf chrome sandbox escape pwn.<br><a href="https://capturetheflag.withgoogle.com/#challenges/sandbox-monochromatic" target="_blank" rel="noopener">https://capturetheflag.withgoogle.com/#challenges/sandbox-monochromatic</a><br>题目出处应该是这个issue。<br><a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1755" target="_blank" rel="noopener">https://bugs.chromium.org/p/project-zero/issues/detail?id=1755</a><br>现在需要补充大量的基础知识。</li>
<li>复习v8 JIT相关的知识和漏洞，准备一个share.</li>
<li>开始打hacker101的ctf，练习一些web的基础知识。</li>
<li>每天坚持锻炼和饮食。</li>
</ol>
<h2 id="2019-6-28"><a href="#2019-6-28" class="headerlink" title="2019-6-28"></a>2019-6-28</h2><ol>
<li>上班第一周，全在搬砖，一点漏洞研究的事情没做，粗略的翻了下ned的议题还有chrome mojo。</li>
<li>思想还需要转变，毕竟上班就是这样，leader让你干什么你就得干什么，哪怕你是造火箭的，也得来拧螺丝钉。</li>
<li>虽然很想挖洞，也觉得工作和自己想象中不一样，不够帅，但是，还是要积极调整啊。</li>
<li>我的第二个v8 cve可能要发下来了，开心。</li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/sakuraのsakura/" rel="tag"># sakuraのsakura</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/29/v9/" rel="next" title="34c3 v9 writeup">
                <i class="fa fa-chevron-left"></i> 34c3 v9 writeup
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/sakura_heart.png"
                alt="sakura" />
            
              <p class="site-author-name" itemprop="name">sakura</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">99</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">44</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/eternalsakura" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:eternalsakura13@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/sakura1328/activities" target="_blank" title="知乎">
                      
                        <i class="fa fa-fw fa-globe"></i>知乎</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/eternalsakura13" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://exp101t.blogspot.com/" title="Murasaki" target="_blank">Murasaki</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://dwfault-blog.imwork.net:30916/" title="dwfalut" target="_blank">dwfalut</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.auxy.xyz" title="Auxy" target="_blank">Auxy</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-1-28"><span class="nav-number">1.</span> <span class="nav-text">2018-1-28</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-1-29"><span class="nav-number">2.</span> <span class="nav-text">2018-1-29</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-1-31"><span class="nav-number">3.</span> <span class="nav-text">2018-1-31</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-1"><span class="nav-number">4.</span> <span class="nav-text">2018-2-1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-2"><span class="nav-number">5.</span> <span class="nav-text">2018-2-2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-3"><span class="nav-number">6.</span> <span class="nav-text">2018-2-3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-4"><span class="nav-number">7.</span> <span class="nav-text">2018-2-4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-5"><span class="nav-number">8.</span> <span class="nav-text">2018-2-5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-6"><span class="nav-number">9.</span> <span class="nav-text">2018-2-6</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-7"><span class="nav-number">10.</span> <span class="nav-text">2018-2-7</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-8"><span class="nav-number">11.</span> <span class="nav-text">2018-2-8</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-9"><span class="nav-number">12.</span> <span class="nav-text">2018-2-9</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-10"><span class="nav-number">13.</span> <span class="nav-text">2018-2-10</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-11"><span class="nav-number">14.</span> <span class="nav-text">2018-2-11</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-12"><span class="nav-number">15.</span> <span class="nav-text">2018-2-12</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-13到19"><span class="nav-number">16.</span> <span class="nav-text">2018-2-13到19</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-20到21"><span class="nav-number">17.</span> <span class="nav-text">2018-2-20到21</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-22"><span class="nav-number">18.</span> <span class="nav-text">2018-2-22</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-23到25"><span class="nav-number">19.</span> <span class="nav-text">2018-2-23到25</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-26"><span class="nav-number">20.</span> <span class="nav-text">2018-2-26</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-27"><span class="nav-number">21.</span> <span class="nav-text">2018-2-27</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-2-28"><span class="nav-number">22.</span> <span class="nav-text">2018-2-28</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-1"><span class="nav-number">23.</span> <span class="nav-text">2018-3-1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-2"><span class="nav-number">24.</span> <span class="nav-text">2018-3-2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-3"><span class="nav-number">25.</span> <span class="nav-text">2018-3-3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-4"><span class="nav-number">26.</span> <span class="nav-text">2018-3-4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-5"><span class="nav-number">27.</span> <span class="nav-text">2018-3-5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-6"><span class="nav-number">28.</span> <span class="nav-text">2018-3-6</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-7-8"><span class="nav-number">29.</span> <span class="nav-text">2018-3-7-8</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-9-10"><span class="nav-number">30.</span> <span class="nav-text">2018-3-9-10</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-11-12"><span class="nav-number">31.</span> <span class="nav-text">2018-3-11-12</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-13-14"><span class="nav-number">32.</span> <span class="nav-text">2018-3-13-14</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-15-17"><span class="nav-number">33.</span> <span class="nav-text">2018-3-15-17</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-18-20"><span class="nav-number">34.</span> <span class="nav-text">2018-3-18-20</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-21-25"><span class="nav-number">35.</span> <span class="nav-text">2018-3-21-25</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-26"><span class="nav-number">36.</span> <span class="nav-text">2018-3-26</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-27"><span class="nav-number">37.</span> <span class="nav-text">2018-3-27</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-28"><span class="nav-number">38.</span> <span class="nav-text">2018-3-28</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-29"><span class="nav-number">39.</span> <span class="nav-text">2018-3-29</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-3-30-31"><span class="nav-number">40.</span> <span class="nav-text">2018-3-30-31</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-1-3"><span class="nav-number">41.</span> <span class="nav-text">2018-4-1-3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-4-11"><span class="nav-number">42.</span> <span class="nav-text">2018-4-4-11</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-12"><span class="nav-number">43.</span> <span class="nav-text">2018-4-12</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-13"><span class="nav-number">44.</span> <span class="nav-text">2018-4-13</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-14-15"><span class="nav-number">45.</span> <span class="nav-text">2018-4-14-15</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-16-17"><span class="nav-number">46.</span> <span class="nav-text">2018-4-16-17</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-18"><span class="nav-number">47.</span> <span class="nav-text">2018-4-18</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-19"><span class="nav-number">48.</span> <span class="nav-text">2018-4-19</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-20-21"><span class="nav-number">49.</span> <span class="nav-text">2018-4-20-21</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-22-24"><span class="nav-number">50.</span> <span class="nav-text">2018-4-22-24</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-25-28"><span class="nav-number">51.</span> <span class="nav-text">2018-4-25-28</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-29-30"><span class="nav-number">52.</span> <span class="nav-text">2018-4-29-30</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-4-31-5-2"><span class="nav-number">53.</span> <span class="nav-text">2018-4-31-5.2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-5-3"><span class="nav-number">54.</span> <span class="nav-text">2018-5-3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-5-4"><span class="nav-number">55.</span> <span class="nav-text">2018-5-4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-5-5-9"><span class="nav-number">56.</span> <span class="nav-text">2018-5-5-9</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-5-10"><span class="nav-number">57.</span> <span class="nav-text">2018-5-10</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-5-11"><span class="nav-number">58.</span> <span class="nav-text">2018-5-11</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-5-12"><span class="nav-number">59.</span> <span class="nav-text">2018-5-12</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-5-13-14"><span class="nav-number">60.</span> <span class="nav-text">2018-5-13-14</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-5-15-6-9"><span class="nav-number">61.</span> <span class="nav-text">2018-5-15-6-9</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-10-11"><span class="nav-number">62.</span> <span class="nav-text">2018-6-10-11</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-12-14"><span class="nav-number">63.</span> <span class="nav-text">2018-6-12-14</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-15"><span class="nav-number">64.</span> <span class="nav-text">2018-6-15</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-16"><span class="nav-number">65.</span> <span class="nav-text">2018-6-16</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-17"><span class="nav-number">66.</span> <span class="nav-text">2018-6-17</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-18"><span class="nav-number">67.</span> <span class="nav-text">2018-6-18</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-19"><span class="nav-number">68.</span> <span class="nav-text">2018-6-19</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-20-21"><span class="nav-number">69.</span> <span class="nav-text">2018-6-20-21</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-22-23"><span class="nav-number">70.</span> <span class="nav-text">2018-6-22-23</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-24-25"><span class="nav-number">71.</span> <span class="nav-text">2018-6-24-25</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-26"><span class="nav-number">72.</span> <span class="nav-text">2018-6-26</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-27-28"><span class="nav-number">73.</span> <span class="nav-text">2018-6-27-28</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-29"><span class="nav-number">74.</span> <span class="nav-text">2018-6-29</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-6-30-7-2"><span class="nav-number">75.</span> <span class="nav-text">2018-6-30-7-2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-3"><span class="nav-number">76.</span> <span class="nav-text">2018-7-3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-4"><span class="nav-number">77.</span> <span class="nav-text">2018-7-4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-5"><span class="nav-number">78.</span> <span class="nav-text">2018-7-5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-6"><span class="nav-number">79.</span> <span class="nav-text">2018-7-6</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-7"><span class="nav-number">80.</span> <span class="nav-text">2018-7-7</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-8"><span class="nav-number">81.</span> <span class="nav-text">2018-7-8</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-9"><span class="nav-number">82.</span> <span class="nav-text">2018-7-9</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-10-11"><span class="nav-number">83.</span> <span class="nav-text">2018-7-10-11</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-12"><span class="nav-number">84.</span> <span class="nav-text">2018-7-12</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-13"><span class="nav-number">85.</span> <span class="nav-text">2018-7-13</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-14"><span class="nav-number">86.</span> <span class="nav-text">2018-7-14</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-15-18"><span class="nav-number">87.</span> <span class="nav-text">2018-7-15-18</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-19-24"><span class="nav-number">88.</span> <span class="nav-text">2018-7-19-24</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-25-26"><span class="nav-number">89.</span> <span class="nav-text">2018-7-25-26</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-27"><span class="nav-number">90.</span> <span class="nav-text">2018-7-27</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-28-29"><span class="nav-number">91.</span> <span class="nav-text">2018-7-28-29</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-30"><span class="nav-number">92.</span> <span class="nav-text">2018-7-30</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-7-31-8-2"><span class="nav-number">93.</span> <span class="nav-text">2018-7-31-8-2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-8-3"><span class="nav-number">94.</span> <span class="nav-text">2018-8-3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-8-4-9"><span class="nav-number">95.</span> <span class="nav-text">2018-8-4-9</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-8-9-18"><span class="nav-number">96.</span> <span class="nav-text">2018-8-9-18</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-8-19"><span class="nav-number">97.</span> <span class="nav-text">2018-8-19</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-8-20"><span class="nav-number">98.</span> <span class="nav-text">2018-8-20</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-8-21"><span class="nav-number">99.</span> <span class="nav-text">2018-8-21</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-8-22-23"><span class="nav-number">100.</span> <span class="nav-text">2018-8-22-23</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-8-24-25"><span class="nav-number">101.</span> <span class="nav-text">2018-8-24-25</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-8-26-31"><span class="nav-number">102.</span> <span class="nav-text">2018-8-26-31</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-9-1-3"><span class="nav-number">103.</span> <span class="nav-text">2018-9-1-3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-9-4-5"><span class="nav-number">104.</span> <span class="nav-text">2018-9-4-5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-9-6-14"><span class="nav-number">105.</span> <span class="nav-text">2018-9-6-14</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-9-15-16"><span class="nav-number">106.</span> <span class="nav-text">2018-9-15-16</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-9-17-21"><span class="nav-number">107.</span> <span class="nav-text">2018-9-17-21</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-9-22"><span class="nav-number">108.</span> <span class="nav-text">2018-9-22</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-9-23-28"><span class="nav-number">109.</span> <span class="nav-text">2018-9-23-28</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-9-29-10-8"><span class="nav-number">110.</span> <span class="nav-text">2018-9-29-10-8</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-10-9-10-27"><span class="nav-number">111.</span> <span class="nav-text">2018-10-9-10-27</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-10-28-10-29"><span class="nav-number">112.</span> <span class="nav-text">2018-10-28-10-29</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-10-30-11-8"><span class="nav-number">113.</span> <span class="nav-text">2018-10-30-11-8</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-11-9-11-10"><span class="nav-number">114.</span> <span class="nav-text">2018-11-9-11-10</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-11-17"><span class="nav-number">115.</span> <span class="nav-text">2018-11-17</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-11-19"><span class="nav-number">116.</span> <span class="nav-text">2018-11-19</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-11-22"><span class="nav-number">117.</span> <span class="nav-text">2018-11-22</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-11-23"><span class="nav-number">118.</span> <span class="nav-text">2018-11-23</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-11-27"><span class="nav-number">119.</span> <span class="nav-text">2018-11-27</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-11-30"><span class="nav-number">120.</span> <span class="nav-text">2018-11-30</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-12-3"><span class="nav-number">121.</span> <span class="nav-text">2018-12-3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-12-4"><span class="nav-number">122.</span> <span class="nav-text">2018-12-4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-12-5"><span class="nav-number">123.</span> <span class="nav-text">2018-12-5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-12-9"><span class="nav-number">124.</span> <span class="nav-text">2018-12-9</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-12-10-17"><span class="nav-number">125.</span> <span class="nav-text">2018-12-10-17</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-12-17-26"><span class="nav-number">126.</span> <span class="nav-text">2018-12-17-26</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2018-12-27-31"><span class="nav-number">127.</span> <span class="nav-text">2018-12-27-31</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2019-1-1-2"><span class="nav-number">128.</span> <span class="nav-text">2019-1-1-2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2019-1-3-9"><span class="nav-number">129.</span> <span class="nav-text">2019-1-3-9</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2019-1-12"><span class="nav-number">130.</span> <span class="nav-text">2019-1-12</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2019-4-2"><span class="nav-number">131.</span> <span class="nav-text">2019-4-2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2019-4-24"><span class="nav-number">132.</span> <span class="nav-text">2019-4-24</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2019-4-25"><span class="nav-number">133.</span> <span class="nav-text">2019-4-25</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2019-6-5"><span class="nav-number">134.</span> <span class="nav-text">2019-6-5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2019-6-6"><span class="nav-number">135.</span> <span class="nav-text">2019-6-6</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2019-6-23"><span class="nav-number">136.</span> <span class="nav-text">2019-6-23</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2019-6-28"><span class="nav-number">137.</span> <span class="nav-text">2019-6-28</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sakura</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://eternalsakura13.com/2099/09/18/study/';
          this.page.identifier = '2099/09/18/study/';
          this.page.title = 'Sakuraのdiary';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
